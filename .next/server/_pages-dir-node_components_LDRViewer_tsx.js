"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_components_LDRViewer_tsx";
exports.ids = ["_pages-dir-node_components_LDRViewer_tsx"];
exports.modules = {

/***/ "(pages-dir-node)/./components/LDRViewer.tsx":
/*!**********************************!*\
  !*** ./components/LDRViewer.tsx ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"three\");\n/* harmony import */ var three_examples_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls.js */ \"three/examples/jsm/controls/OrbitControls.js\");\n/* harmony import */ var three_examples_jsm_loaders_LDrawLoader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three/examples/jsm/loaders/LDrawLoader.js */ \"three/examples/jsm/loaders/LDrawLoader.js\");\n/* harmony import */ var three_examples_jsm_materials_LDrawConditionalLineMaterial_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three/examples/jsm/materials/LDrawConditionalLineMaterial.js */ \"three/examples/jsm/materials/LDrawConditionalLineMaterial.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([three__WEBPACK_IMPORTED_MODULE_2__, three_examples_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_3__, three_examples_jsm_loaders_LDrawLoader_js__WEBPACK_IMPORTED_MODULE_4__, three_examples_jsm_materials_LDrawConditionalLineMaterial_js__WEBPACK_IMPORTED_MODULE_5__]);\n([three__WEBPACK_IMPORTED_MODULE_2__, three_examples_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_3__, three_examples_jsm_loaders_LDrawLoader_js__WEBPACK_IMPORTED_MODULE_4__, three_examples_jsm_materials_LDrawConditionalLineMaterial_js__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nconst LDRViewerComponent = ({ modelPath, ldrawContent, preserveCamera })=>{\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const sceneRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const rendererRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cameraRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const controlsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modelGroupRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const loadingManagerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isLoadingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const currentModelPathRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)('');\n    const isInitializedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const errorCountRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    // Error state for displaying messages\n    const [loadError, setLoadError] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(null);\n    // Camera state preservation\n    const savedCameraPosition = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const savedCameraTarget = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Step control\n    const [currentStep, setCurrentStep] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(1);\n    const [totalSteps, setTotalSteps] = react__WEBPACK_IMPORTED_MODULE_1___default().useState(1);\n    const stepsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const allPartsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    // Create loading manager only once\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"LDRViewerComponent.useEffect\": ()=>{\n            if (loadingManagerRef.current) return;\n            const manager = new three__WEBPACK_IMPORTED_MODULE_2__.LoadingManager();\n            // Implement path resolution strategy similar to Three.js packLDrawModel\n            manager.setURLModifier({\n                \"LDRViewerComponent.useEffect\": (url)=>{\n                    // console.log('Original URL:', url);\n                    // Normalize path separators\n                    let normalized = url.replace(/\\\\/g, '/');\n                    // Handle s\\ prefix for subparts (convert s\\file.dat to s/file.dat)\n                    if (normalized.includes('s/') || normalized.match(/s[\\\\\\/]/)) {\n                        const parts = normalized.split(/[\\\\\\/]/);\n                        const lastTwo = parts.slice(-2);\n                        if (lastTwo[0] === 's') {\n                            // This is a subpart reference\n                            normalized = `/ldraw/parts/s/${lastTwo[1]}`;\n                            // console.log('Subpart detected, normalized to:', normalized);\n                            return normalized;\n                        }\n                    }\n                    // Extract the filename and check for subdirectory (like s/)\n                    const urlParts = normalized.split('/');\n                    const filename = urlParts[urlParts.length - 1].toLowerCase();\n                    const hasSubdir = urlParts.length >= 2 && urlParts[urlParts.length - 2] === 's';\n                    // Define possible path prefixes to try\n                    const pathPrefixes = [\n                        '/output/',\n                        '/ldraw/',\n                        '/ldraw/p/',\n                        '/ldraw/parts/'\n                    ];\n                    // If the URL already has a valid prefix, clean it up\n                    for (const prefix of pathPrefixes){\n                        if (normalized.includes(prefix)) {\n                            // Clean up any duplicate path segments\n                            normalized = normalized.replace(/\\/ldraw\\/parts\\/parts\\//g, '/ldraw/parts/');\n                            normalized = normalized.replace(/\\/ldraw\\/p\\/p\\//g, '/ldraw/p/');\n                            normalized = normalized.replace(/\\/output\\/output\\//g, '/output/');\n                            // Remove any redundant path combinations but preserve s/ subdirectory\n                            if (!normalized.includes('/s/')) {\n                                normalized = normalized.replace(/\\/ldraw\\/parts\\/p\\//g, '/ldraw/p/');\n                                normalized = normalized.replace(/\\/output\\/p\\//g, '/ldraw/p/');\n                                normalized = normalized.replace(/\\/ldraw\\/p\\/parts\\//g, '/ldraw/parts/');\n                                normalized = normalized.replace(/\\/output\\/parts\\//g, '/ldraw/parts/');\n                            } else {\n                                // Handle subparts in s/ directory\n                                normalized = normalized.replace(/\\/ldraw\\/parts\\/parts\\/s\\//g, '/ldraw/parts/s/');\n                                normalized = normalized.replace(/\\/ldraw\\/p\\/parts\\/s\\//g, '/ldraw/parts/s/');\n                                normalized = normalized.replace(/\\/output\\/parts\\/s\\//g, '/ldraw/parts/s/');\n                            }\n                            // console.log('Normalized URL:', normalized);\n                            return normalized;\n                        }\n                    }\n                    // If no valid prefix found, try to construct the path\n                    // This handles cases where the URL is just a filename or relative path\n                    if (!normalized.startsWith('/ldraw/')) {\n                        // Handle subparts (files in s/ directory)\n                        if (hasSubdir) {\n                            normalized = `/ldraw/parts/s/${filename}`;\n                        } else if (filename.match(/^\\d/) || filename.startsWith('stud') || filename.startsWith('edge')) {\n                            normalized = `/ldraw/p/${filename}`;\n                        } else if (filename.endsWith('.dat')) {\n                            normalized = `/ldraw/parts/${filename}`;\n                        } else if (filename.endsWith('.ldr') || filename.endsWith('.mpd')) {\n                            normalized = `/output/${filename}`;\n                        }\n                    // console.log('Constructed URL:', normalized);\n                    }\n                    return normalized;\n                }\n            }[\"LDRViewerComponent.useEffect\"]);\n            loadingManagerRef.current = manager;\n            return ({\n                \"LDRViewerComponent.useEffect\": ()=>{\n                    manager.setURLModifier(undefined);\n                    loadingManagerRef.current = null;\n                }\n            })[\"LDRViewerComponent.useEffect\"];\n        }\n    }[\"LDRViewerComponent.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"LDRViewerComponent.useEffect\": ()=>{\n            if (!containerRef.current || isInitializedRef.current) return;\n            isInitializedRef.current = true;\n            const container = containerRef.current;\n            const width = container.clientWidth;\n            const height = container.clientHeight;\n            const scene = new three__WEBPACK_IMPORTED_MODULE_2__.Scene();\n            scene.background = new three__WEBPACK_IMPORTED_MODULE_2__.Color(0xeeeeee);\n            sceneRef.current = scene;\n            // Camera with settings optimized for large LEGO models\n            const camera = new three__WEBPACK_IMPORTED_MODULE_2__.PerspectiveCamera(45, width / height, 0.1, 100000);\n            camera.position.set(300, 400, 700);\n            cameraRef.current = camera;\n            const renderer = new three__WEBPACK_IMPORTED_MODULE_2__.WebGLRenderer({\n                antialias: true\n            });\n            renderer.setSize(width, height);\n            renderer.setPixelRatio(window.devicePixelRatio);\n            container.appendChild(renderer.domElement);\n            rendererRef.current = renderer;\n            const controls = new three_examples_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_3__.OrbitControls(camera, renderer.domElement);\n            controls.enableDamping = true;\n            controls.dampingFactor = 0.05;\n            controls.enablePan = true;\n            controls.enableRotate = true;\n            controls.enableZoom = true;\n            controls.screenSpacePanning = false;\n            controls.minDistance = 10;\n            controls.maxDistance = 50000; // Greatly increased max zoom out distance\n            controls.target.set(0, 0, 0);\n            controlsRef.current = controls;\n            // Enhanced lighting for better visibility\n            scene.add(new three__WEBPACK_IMPORTED_MODULE_2__.AmbientLight(0xffffff, 0.9)); // Brighter ambient light\n            // Main directional light\n            const dirLight = new three__WEBPACK_IMPORTED_MODULE_2__.DirectionalLight(0xffffff, 1.0);\n            dirLight.position.set(500, 1000, 500);\n            dirLight.castShadow = false;\n            scene.add(dirLight);\n            // Additional fill lights from different angles\n            const fillLight1 = new three__WEBPACK_IMPORTED_MODULE_2__.DirectionalLight(0xffffff, 0.5);\n            fillLight1.position.set(-500, 500, -500);\n            scene.add(fillLight1);\n            const fillLight2 = new three__WEBPACK_IMPORTED_MODULE_2__.DirectionalLight(0xffffff, 0.5);\n            fillLight2.position.set(500, 500, -500);\n            scene.add(fillLight2);\n            // Add a hemisphere light for more natural lighting\n            const hemiLight = new three__WEBPACK_IMPORTED_MODULE_2__.HemisphereLight(0xffffff, 0xcccccc, 0.4);\n            hemiLight.position.set(0, 500, 0);\n            scene.add(hemiLight);\n            // Grid helper removed\n            // const gridHelper = new THREE.GridHelper(1000, 20);\n            // scene.add(gridHelper);\n            // Add axes helper\n            const axesHelper = new three__WEBPACK_IMPORTED_MODULE_2__.AxesHelper(500);\n            scene.add(axesHelper);\n            const handleResize = {\n                \"LDRViewerComponent.useEffect.handleResize\": ()=>{\n                    if (!containerRef.current || !cameraRef.current || !rendererRef.current) return;\n                    const w = containerRef.current.clientWidth;\n                    const h = containerRef.current.clientHeight;\n                    rendererRef.current.setSize(w, h);\n                    cameraRef.current.aspect = w / h;\n                    cameraRef.current.updateProjectionMatrix();\n                }\n            }[\"LDRViewerComponent.useEffect.handleResize\"];\n            window.addEventListener('resize', handleResize);\n            // Animation loop is now handled in the cube effect\n            console.log('Scene initialized');\n            return ({\n                \"LDRViewerComponent.useEffect\": ()=>{\n                    window.removeEventListener('resize', handleResize);\n                // Keep renderer intact but clean up event listener\n                // if (rendererRef.current && containerRef.current) {\n                //   containerRef.current.removeChild(rendererRef.current.domElement);\n                //   rendererRef.current.dispose();\n                // }\n                // isInitializedRef.current = false;\n                }\n            })[\"LDRViewerComponent.useEffect\"];\n        }\n    }[\"LDRViewerComponent.useEffect\"], []);\n    // Animation loop - using useRef to ensure single instance\n    const animationIdRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isAnimatingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"LDRViewerComponent.useEffect\": ()=>{\n            if (!sceneRef.current || !rendererRef.current || !cameraRef.current || !controlsRef.current) return;\n            // Prevent multiple animation loops\n            if (isAnimatingRef.current) {\n                console.log('Animation already running, skipping...');\n                return;\n            }\n            // Commented out cancellation\n            // if (animationIdRef.current !== null) {\n            //   cancelAnimationFrame(animationIdRef.current);\n            // }\n            isAnimatingRef.current = true;\n            const animate = {\n                \"LDRViewerComponent.useEffect.animate\": ()=>{\n                    if (!isAnimatingRef.current) return;\n                    // Check all refs before scheduling next frame\n                    if (!controlsRef.current || !rendererRef.current || !sceneRef.current || !cameraRef.current) {\n                        console.warn('Animation loop stopped: missing refs');\n                        isAnimatingRef.current = false;\n                        return;\n                    }\n                    animationIdRef.current = requestAnimationFrame(animate);\n                    try {\n                        // Only validate scene if we've had recent errors\n                        if (errorCountRef.current > 0 && errorCountRef.current < 5) {\n                            let hasNullChildren = false;\n                            let nullCheckCount = 0;\n                            sceneRef.current.traverse({\n                                \"LDRViewerComponent.useEffect.animate\": (child)=>{\n                                    nullCheckCount++;\n                                    // Check if the object itself has required properties\n                                    if (!child.hasOwnProperty('visible')) {\n                                        console.error('Object missing visible property:', child);\n                                    }\n                                    if (child.children) {\n                                        for(let i = 0; i < child.children.length; i++){\n                                            if (child.children[i] === null || child.children[i] === undefined) {\n                                                console.error('Found null/undefined child in scene at index', i, 'of parent:', child);\n                                                hasNullChildren = true;\n                                                // Remove the null child\n                                                child.children.splice(i, 1);\n                                                i--; // Adjust index after removal\n                                            }\n                                        }\n                                    }\n                                }\n                            }[\"LDRViewerComponent.useEffect.animate\"]);\n                            if (hasNullChildren) {\n                                console.warn('Cleaned null children from scene graph after checking', nullCheckCount, 'objects');\n                            }\n                        }\n                        // Update controls and render\n                        // Validate controls state before updating\n                        if (controlsRef.current) {\n                            // Check if controls target is valid\n                            if (!isFinite(controlsRef.current.target.x) || !isFinite(controlsRef.current.target.y) || !isFinite(controlsRef.current.target.z)) {\n                                console.warn('OrbitControls target became invalid, resetting to origin');\n                                controlsRef.current.target.set(0, 0, 0);\n                            }\n                            controlsRef.current.update();\n                        }\n                        // Clean up any null objects in the scene before rendering\n                        const cleanupNullObjects = {\n                            \"LDRViewerComponent.useEffect.animate.cleanupNullObjects\": (obj)=>{\n                                if (!obj || !obj.children) return;\n                                // Filter out null/undefined children\n                                const validChildren = [];\n                                for(let i = 0; i < obj.children.length; i++){\n                                    const child = obj.children[i];\n                                    if (child !== null && child !== undefined && child.visible !== undefined) {\n                                        validChildren.push(child);\n                                        cleanupNullObjects(child); // Recursively clean children\n                                    }\n                                }\n                                // Only update if we removed something\n                                if (validChildren.length !== obj.children.length) {\n                                    obj.children = validChildren;\n                                }\n                            }\n                        }[\"LDRViewerComponent.useEffect.animate.cleanupNullObjects\"];\n                        if (sceneRef.current) {\n                            cleanupNullObjects(sceneRef.current);\n                        }\n                        rendererRef.current.render(sceneRef.current, cameraRef.current);\n                        // Reset error counter on successful render\n                        if (errorCountRef.current > 0) {\n                            console.log('Rendering recovered after', errorCountRef.current, 'errors');\n                            errorCountRef.current = 0;\n                        }\n                    } catch (error) {\n                        errorCountRef.current = (errorCountRef.current || 0) + 1;\n                        if (errorCountRef.current === 1) {\n                            // Only log detailed info on first error\n                            console.error('First error in animation loop:', error);\n                            console.error('Scene children count:', sceneRef.current.children.length);\n                            console.error('Scene state:', sceneRef.current);\n                            console.error('Camera state:', cameraRef.current);\n                            console.error('Controls state:', controlsRef.current);\n                            // Log the model group state\n                            if (modelGroupRef.current) {\n                                console.error('Model group state:', modelGroupRef.current);\n                                console.error('Model visible:', modelGroupRef.current.visible);\n                                console.error('Model children count:', modelGroupRef.current.children.length);\n                            }\n                        }\n                        // Stop animation after too many errors\n                        if (errorCountRef.current > 100) {\n                            console.error('Too many render errors, stopping animation loop');\n                            isAnimatingRef.current = false;\n                        }\n                    }\n                }\n            }[\"LDRViewerComponent.useEffect.animate\"];\n            // Start the animation loop\n            animate();\n            console.log('Animation loop started');\n            return ({\n                \"LDRViewerComponent.useEffect\": ()=>{\n                    // Properly clean up animation loop\n                    isAnimatingRef.current = false;\n                    if (animationIdRef.current !== null) {\n                        cancelAnimationFrame(animationIdRef.current);\n                        animationIdRef.current = null;\n                    }\n                }\n            })[\"LDRViewerComponent.useEffect\"];\n        }\n    }[\"LDRViewerComponent.useEffect\"], []);\n    // Test cube commented out - LEGO model should load instead\n    /*\r\n  const cubeRef = useRef<THREE.Mesh | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!sceneRef.current) return;\r\n\r\n    // Prevent adding cube multiple times\r\n    if (cubeRef.current) return;\r\n\r\n    // Add a simple red cube that we know works\r\n    const geometry = new THREE.BoxGeometry(30, 30, 30);\r\n    const material = new THREE.MeshPhongMaterial({\r\n      color: 0xff0000,\r\n      side: THREE.DoubleSide\r\n    });\r\n    const cube = new THREE.Mesh(geometry, material);\r\n    cube.position.set(0, 300, 0);\r\n\r\n    sceneRef.current.add(cube);\r\n\r\n    cubeRef.current = cube;\r\n    console.log('Simple test cube added at:', cube.position);\r\n    console.log('Scene now has', sceneRef.current.children.length, 'children');\r\n\r\n    return () => {\r\n      // Commented out cleanup to keep the cube visible\r\n      // if (sceneRef.current && cube) {\r\n      //   sceneRef.current.remove(cube);  // Also need to prevent removal from scene\r\n      //   geometry.dispose();\r\n      //   material.dispose();\r\n      // }\r\n      // cubeRef.current = null;\r\n    };\r\n  }, []);\r\n  */ // Cube animation commented out since cube is removed\n    /*\r\n  useEffect(() => {\r\n    const animate = () => {\r\n      if (cubeRef.current) {\r\n        cubeRef.current.rotation.x += 0.01;\r\n        cubeRef.current.rotation.y += 0.01;\r\n      }\r\n    };\r\n\r\n    const id = setInterval(animate, 16); // ~60fps\r\n\r\n    // Commented out interval cleanup\r\n    // return () => clearInterval(id);\r\n    return () => {};\r\n  }, []);\r\n  */ // LEGO LOADING CODE\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"LDRViewerComponent.useEffect\": ()=>{\n            // Need either modelPath or ldrawContent\n            if (!modelPath && !ldrawContent || !sceneRef.current || !rendererRef.current || !cameraRef.current) return;\n            // Skip if we're already loading this exact model\n            const currentIdentifier = ldrawContent ? `content-${ldrawContent.substring(0, 100)}` : modelPath;\n            if (currentModelPathRef.current === currentIdentifier && isLoadingRef.current) {\n                console.log('Same model already loading, skipping...');\n                return;\n            }\n            // Skip if this model is already loaded\n            if (currentModelPathRef.current === currentIdentifier && modelGroupRef.current) {\n                console.log('Model already loaded, skipping...');\n                return;\n            }\n            // Prevent concurrent loads\n            if (isLoadingRef.current) {\n                console.log('Another model is loading, skipping...');\n                return;\n            }\n            // Save camera state before removing model if preserveCamera is true\n            if (preserveCamera && cameraRef.current && controlsRef.current) {\n                savedCameraPosition.current = cameraRef.current.position.clone();\n                savedCameraTarget.current = controlsRef.current.target.clone();\n                console.log('Saved camera position:', savedCameraPosition.current);\n                console.log('Saved camera target:', savedCameraTarget.current);\n            }\n            // Clean up previous model safely\n            if (modelGroupRef.current && sceneRef.current) {\n                console.log('Removing previous model from scene');\n                // Mark as invisible first to prevent render issues\n                modelGroupRef.current.visible = false;\n                // Remove from scene on next tick\n                const modelToRemove = modelGroupRef.current;\n                modelGroupRef.current = null;\n                setTimeout({\n                    \"LDRViewerComponent.useEffect\": ()=>{\n                        if (sceneRef.current && modelToRemove) {\n                            console.log('Actually removing model and disposing resources');\n                            sceneRef.current.remove(modelToRemove);\n                            // Dispose of geometries and materials if needed\n                            modelToRemove.traverse({\n                                \"LDRViewerComponent.useEffect\": (child)=>{\n                                    if (child.geometry) child.geometry.dispose();\n                                    if (child.material) {\n                                        if (Array.isArray(child.material)) {\n                                            child.material.forEach({\n                                                \"LDRViewerComponent.useEffect\": (mat)=>mat.dispose()\n                                            }[\"LDRViewerComponent.useEffect\"]);\n                                        } else {\n                                            child.material.dispose();\n                                        }\n                                    }\n                                }\n                            }[\"LDRViewerComponent.useEffect\"]);\n                            console.log('Model removal complete');\n                        }\n                    }\n                }[\"LDRViewerComponent.useEffect\"], 0);\n            }\n            // Prevent multiple loads of the same model\n            let cancelled = false;\n            isLoadingRef.current = true;\n            currentModelPathRef.current = currentIdentifier || 'generated';\n            // Clear any previous error\n            setLoadError(null);\n            const loader = new three_examples_jsm_loaders_LDrawLoader_js__WEBPACK_IMPORTED_MODULE_4__.LDrawLoader(loadingManagerRef.current ?? undefined);\n            // Set the parts library path to the ldraw directory\n            loader.setPartsLibraryPath('/ldraw/');\n            // Enable smooth normals for better rendering\n            loader.smoothNormals = true;\n            // Set the file map for better part resolution\n            loader.setFileMap({});\n            // Set the conditional line material class (not an instance)\n            loader.setConditionalLineMaterial(three_examples_jsm_materials_LDrawConditionalLineMaterial_js__WEBPACK_IMPORTED_MODULE_5__.LDrawConditionalLineMaterial);\n            console.log(ldrawContent ? 'Loading LDraw from content' : `Loading LDR file: ${modelPath}`);\n            // Try to preload materials first, but don't fail if it doesn't work\n            const materialsPromise = loader.preloadMaterials('/ldraw/LDConfig.ldr').then({\n                \"LDRViewerComponent.useEffect.materialsPromise\": ()=>{\n                    console.log('Materials preloaded successfully');\n                }\n            }[\"LDRViewerComponent.useEffect.materialsPromise\"]).catch({\n                \"LDRViewerComponent.useEffect.materialsPromise\": (err)=>{\n                    console.warn('Could not preload materials, using defaults:', err.message);\n                }\n            }[\"LDRViewerComponent.useEffect.materialsPromise\"]);\n            // Override console.warn to catch subobject loading errors\n            const originalWarn = console.warn;\n            let hasSubobjectError = false;\n            console.warn = ({\n                \"LDRViewerComponent.useEffect\": (...args)=>{\n                    const message = args.join(' ');\n                    if (message.includes('could not be loaded') || message.includes('Subobject')) {\n                        hasSubobjectError = true;\n                        // Don't log the warning to console\n                        return;\n                    }\n                    originalWarn.apply(console, args);\n                }\n            })[\"LDRViewerComponent.useEffect\"];\n            // Load the model (wait for materials if possible, but don't block)\n            materialsPromise.finally({\n                \"LDRViewerComponent.useEffect\": ()=>{\n                    if (cancelled) return;\n                    // If we have direct content, parse it; otherwise load from file\n                    let modelPromise;\n                    if (ldrawContent) {\n                        // Use parse with callbacks and wrap in a promise\n                        modelPromise = new Promise({\n                            \"LDRViewerComponent.useEffect\": (resolve)=>{\n                                loader.parse(ldrawContent, {\n                                    \"LDRViewerComponent.useEffect\": (group)=>resolve(group)\n                                }[\"LDRViewerComponent.useEffect\"], {\n                                    \"LDRViewerComponent.useEffect\": (error)=>{\n                                        console.error('Error parsing LDraw content:', error);\n                                        resolve(null);\n                                    }\n                                }[\"LDRViewerComponent.useEffect\"]);\n                            }\n                        }[\"LDRViewerComponent.useEffect\"]);\n                    } else if (modelPath) {\n                        modelPromise = loader.loadAsync(modelPath).catch({\n                            \"LDRViewerComponent.useEffect\": (error)=>{\n                                console.error('Error loading model:', error);\n                                return null;\n                            }\n                        }[\"LDRViewerComponent.useEffect\"]);\n                    } else {\n                        modelPromise = Promise.resolve(null);\n                    }\n                    modelPromise.then({\n                        \"LDRViewerComponent.useEffect\": (group)=>{\n                            // Restore original console.warn\n                            console.warn = originalWarn;\n                            if (!group || cancelled) return;\n                            // Check if there were subobject errors\n                            if (hasSubobjectError) {\n                                console.log('Model has missing parts, displaying as error');\n                                throw new Error('Missing parts - model cannot be rendered properly');\n                            }\n                            console.log('Model loaded successfully:', group);\n                            isLoadingRef.current = false;\n                            // Safe traversal to handle null objects - remove them completely\n                            const safeTraverse = {\n                                \"LDRViewerComponent.useEffect.safeTraverse\": (obj)=>{\n                                    // Skip if null or undefined\n                                    if (!obj) return;\n                                    // Skip if not a valid object\n                                    if (typeof obj !== 'object') return;\n                                    // Skip if doesn't have visible property (not a Three.js object)\n                                    if (!('visible' in obj)) return;\n                                    // Process this object\n                                    if (obj.isMesh) {\n                                        const mesh = obj;\n                                        if (!mesh.material) {\n                                            // Create a default material if missing\n                                            mesh.material = new three__WEBPACK_IMPORTED_MODULE_2__.MeshPhongMaterial({\n                                                color: 0x808080,\n                                                side: three__WEBPACK_IMPORTED_MODULE_2__.DoubleSide\n                                            });\n                                            console.log('Added default material to mesh:', mesh.name);\n                                        } else if (Array.isArray(mesh.material)) {\n                                            // Check array of materials\n                                            mesh.material = mesh.material.map({\n                                                \"LDRViewerComponent.useEffect.safeTraverse\": (mat)=>{\n                                                    if (!mat) {\n                                                        console.log('Replacing null material in array');\n                                                        return new three__WEBPACK_IMPORTED_MODULE_2__.MeshPhongMaterial({\n                                                            color: 0x808080,\n                                                            side: three__WEBPACK_IMPORTED_MODULE_2__.DoubleSide\n                                                        });\n                                                    }\n                                                    return mat;\n                                                }\n                                            }[\"LDRViewerComponent.useEffect.safeTraverse\"]);\n                                        }\n                                    }\n                                    // Remove null children completely\n                                    if (obj.children && Array.isArray(obj.children)) {\n                                        const validChildren = [];\n                                        for (const child of obj.children){\n                                            // Only keep valid children\n                                            if (child && typeof child === 'object' && 'visible' in child) {\n                                                validChildren.push(child);\n                                                safeTraverse(child);\n                                            } else if (child) {\n                                                console.warn('Removing invalid child from model:', child);\n                                            }\n                                        }\n                                        // Replace children array with only valid ones\n                                        obj.children = validChildren;\n                                    }\n                                }\n                            }[\"LDRViewerComponent.useEffect.safeTraverse\"];\n                            safeTraverse(group);\n                            // Skip step parsing for now - just add the model as-is\n                            /*\r\n        // Parse STEP commands from the LDraw content if available\r\n        let stepBoundaries: number[] = [];\r\n        if (content) {\r\n          const lines = content.split('\\n');\r\n          let partCount = 0;\r\n          lines.forEach(line => {\r\n            const trimmed = line.trim();\r\n            if (trimmed.startsWith('1 ')) {\r\n              // This is a part line\r\n              partCount++;\r\n            } else if (trimmed === '0 STEP' || trimmed.toLowerCase() === '0 step') {\r\n              // This is a STEP command\r\n              stepBoundaries.push(partCount);\r\n              console.log(`Found STEP command after part ${partCount}`);\r\n            }\r\n          });\r\n          if (stepBoundaries.length > 0) {\r\n            console.log(`Found ${stepBoundaries.length} STEP commands in model`);\r\n          }\r\n        }\r\n\r\n        // Organize model into steps based on STEP commands\r\n        const steps: THREE.Group[] = [];\r\n        const allParts: THREE.Object3D[] = [];\r\n\r\n        // Collect only direct child groups/objects (not nested meshes)\r\n        // Each direct child typically represents one part from the LDraw file\r\n        const collectTopLevelParts = (obj: any, depth: number = 0) => {\r\n          // For the root group, process its direct children\r\n          if (depth === 0) {\r\n            obj.children.forEach((child: any) => {\r\n              // Each direct child is typically a part\r\n              if (child.type === 'Group' || child.type === 'Object3D' || child.isMesh || child.isLine) {\r\n                allParts.push(child);\r\n              }\r\n            });\r\n          }\r\n        };\r\n\r\n        collectTopLevelParts(group);\r\n        console.log(`Found ${allParts.length} top-level parts in model`);\r\n\r\n        // If we have STEP commands, organize parts accordingly\r\n        if (stepBoundaries.length > 0 && allParts.length > 0) {\r\n          const totalSteps = stepBoundaries.length;\r\n          console.log(`Organizing ${allParts.length} parts into ${totalSteps} steps`);\r\n          console.log(`Step boundaries (cumulative part counts): ${stepBoundaries.join(', ')}`);\r\n\r\n          // Assign step numbers to each part\r\n          allParts.forEach((part, index) => {\r\n            // Find which step this part belongs to\r\n            let stepNumber = 1;\r\n            for (let i = 0; i < stepBoundaries.length; i++) {\r\n              if (index < stepBoundaries[i]) {\r\n                stepNumber = i + 1;\r\n                break;\r\n              }\r\n            }\r\n\r\n            // Assign step number to this part and all its children\r\n            part.userData.stepNumber = stepNumber;\r\n            part.traverse((child: any) => {\r\n              child.userData.stepNumber = stepNumber;\r\n            });\r\n          });\r\n\r\n          // Create step groups and add parts to them\r\n          for (let stepNum = 1; stepNum <= totalSteps; stepNum++) {\r\n            const stepGroup = new THREE.Group();\r\n            stepGroup.name = `Step ${stepNum}`;\r\n            let partsInStep = 0;\r\n\r\n            allParts.forEach(part => {\r\n              if (part.userData.stepNumber === stepNum) {\r\n                stepGroup.add(part);\r\n                partsInStep++;\r\n              }\r\n            });\r\n\r\n            if (partsInStep > 0) {\r\n              steps.push(stepGroup);\r\n              console.log(`Step ${stepNum}: ${partsInStep} parts`);\r\n            }\r\n          }\r\n\r\n        } else {\r\n          // No STEP commands found, treat all parts as one step\r\n          console.log('No STEP commands found, treating model as single step');\r\n          const singleStep = new THREE.Group();\r\n          singleStep.name = 'Step 1';\r\n          allParts.forEach(part => {\r\n            part.userData.stepNumber = 1;\r\n            part.traverse((child: any) => {\r\n              child.userData.stepNumber = 1;\r\n            });\r\n            singleStep.add(part);\r\n          });\r\n          if (singleStep.children.length > 0) {\r\n            steps.push(singleStep);\r\n          }\r\n        }\r\n\r\n        // Collect all mesh/line objects for visibility control\r\n        const allRenderables: THREE.Object3D[] = [];\r\n        group.traverse((child: any) => {\r\n          if (child.isMesh || child.isLine || child.isLineSegments) {\r\n            allRenderables.push(child);\r\n          }\r\n        });\r\n\r\n        console.log(`Model organized into ${steps.length} steps with ${allRenderables.length} renderable objects`);\r\n        stepsRef.current = steps;\r\n        allPartsRef.current = allRenderables;\r\n        setTotalSteps(steps.length);\r\n        setCurrentStep(steps.length); // Start with all steps visible\r\n        */ // Position model at origin\n                            group.position.set(0, 0, 0);\n                            group.rotation.x = Math.PI; // Rotation can cause issues, keeping it commented\n                            modelGroupRef.current = group;\n                            if (sceneRef.current) {\n                                sceneRef.current.add(group);\n                                console.log('Model added to scene');\n                                console.log('Group children:', group.children.length);\n                                console.log('Group visible:', group.visible);\n                                console.log('Group in scene:', sceneRef.current.children.includes(group));\n                                // Make sure the group is visible\n                                group.visible = true;\n                                group.traverse({\n                                    \"LDRViewerComponent.useEffect\": (child)=>{\n                                        child.visible = true;\n                                    }\n                                }[\"LDRViewerComponent.useEffect\"]);\n                                // Count visible meshes and check materials\n                                let meshCount = 0;\n                                let visibleCount = 0;\n                                group.traverse({\n                                    \"LDRViewerComponent.useEffect\": (child)=>{\n                                        if (child.isMesh) {\n                                            meshCount++;\n                                            const mesh = child;\n                                            if (mesh.visible) visibleCount++;\n                                            if (!mesh.geometry.boundingBox) {\n                                                mesh.geometry.computeBoundingBox();\n                                            }\n                                            // Log mesh details\n                                            console.log('Mesh details:', {\n                                                name: mesh.name,\n                                                visible: mesh.visible,\n                                                material: mesh.material,\n                                                geometryVertices: mesh.geometry.attributes.position?.count || 0,\n                                                position: mesh.position,\n                                                scale: mesh.scale\n                                            });\n                                            // Make sure mesh has a material\n                                            if (!mesh.material) {\n                                                console.warn('Mesh has no material, adding default');\n                                                mesh.material = new three__WEBPACK_IMPORTED_MODULE_2__.MeshPhongMaterial({\n                                                    color: 0xff0000,\n                                                    side: three__WEBPACK_IMPORTED_MODULE_2__.DoubleSide\n                                                });\n                                            }\n                                        }\n                                    }\n                                }[\"LDRViewerComponent.useEffect\"]);\n                                console.log(`Found ${meshCount} meshes, ${visibleCount} visible`);\n                            // Test cube removed - rendering verified to be working\n                            // const testGeometry = new THREE.BoxGeometry(50, 50, 50);\n                            // const testMaterial = new THREE.MeshPhongMaterial({ color: 0x00ff00 });\n                            // const testCube = new THREE.Mesh(testGeometry, testMaterial);\n                            // testCube.position.set(100, 25, 0);\n                            // sceneRef.current.add(testCube);\n                            // console.log('Test cube added at:', testCube.position);\n                            }\n                            // Force update matrices before calculating bounding box\n                            group.updateMatrixWorld(true);\n                            // Calculate bounding box and center camera\n                            const box = new three__WEBPACK_IMPORTED_MODULE_2__.Box3().setFromObject(group);\n                            const center = box.getCenter(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3());\n                            const size = box.getSize(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3());\n                            // Log model information\n                            if (!box.isEmpty() && size.x > 0 && size.y > 0 && size.z > 0) {\n                                console.log('Model center:', center.x, center.y, center.z);\n                                console.log('Model size:', size.x, size.y, size.z);\n                            } else {\n                                console.warn('Model has empty/invalid bounding box');\n                            }\n                            if (controlsRef.current && cameraRef.current) {\n                                // Restore camera position if preserveCamera is true and we have saved state\n                                if (preserveCamera && savedCameraPosition.current && savedCameraTarget.current) {\n                                    console.log('Restoring camera position');\n                                    cameraRef.current.position.copy(savedCameraPosition.current);\n                                    controlsRef.current.target.copy(savedCameraTarget.current);\n                                } else {\n                                    // Just update controls to look at origin for initial load\n                                    controlsRef.current.target.set(0, 0, 0);\n                                }\n                                controlsRef.current.update();\n                            }\n                            // The animation loop will handle rendering\n                            console.log('Scene children:', sceneRef.current?.children.length || 0);\n                        }\n                    }[\"LDRViewerComponent.useEffect\"]).catch({\n                        \"LDRViewerComponent.useEffect\": (error)=>{\n                            // Restore original console.warn in case of error\n                            console.warn = originalWarn;\n                            if (cancelled) return;\n                            console.error('Error loading model:', error);\n                            console.error('Model path:', modelPath);\n                            console.error('Stack trace:', error.stack);\n                            isLoadingRef.current = false;\n                            // Set error message for display\n                            let errorMessage = 'Build failed to render';\n                            if (error.message) {\n                                // Check if it's a missing parts error\n                                if (error.message.includes('Missing parts')) {\n                                    errorMessage = 'Cannot be rendered\\nMissing LEGO parts';\n                                } else {\n                                    // Extract the specific part that failed if available\n                                    const partMatch = error.message.match(/\"([^\"]+\\.dat)\"/);\n                                    if (partMatch) {\n                                        errorMessage = `Build failed to render\\nInvalid part: ${partMatch[1]}`;\n                                    }\n                                }\n                            }\n                            setLoadError(errorMessage);\n                        }\n                    }[\"LDRViewerComponent.useEffect\"]);\n                }\n            }[\"LDRViewerComponent.useEffect\"]); // Close the .finally() block\n            // Cleanup function - only remove model if path changes or component unmounts\n            return ({\n                \"LDRViewerComponent.useEffect\": ()=>{\n                    cancelled = true;\n                    // Restore original console.warn if it's been overridden\n                    if (console.warn !== originalWarn) {\n                        console.warn = originalWarn;\n                    }\n                // Don't clear the model here - it will be cleared when a new model loads\n                // or when the component unmounts\n                }\n            })[\"LDRViewerComponent.useEffect\"];\n        }\n    }[\"LDRViewerComponent.useEffect\"], [\n        modelPath,\n        ldrawContent\n    ]);\n    // Clean up model when component unmounts\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"LDRViewerComponent.useEffect\": ()=>{\n            return ({\n                \"LDRViewerComponent.useEffect\": ()=>{\n                    if (modelGroupRef.current && sceneRef.current) {\n                        // Mark as invisible first\n                        modelGroupRef.current.visible = false;\n                        // Then remove\n                        sceneRef.current.remove(modelGroupRef.current);\n                        modelGroupRef.current = null;\n                    }\n                    isLoadingRef.current = false;\n                    currentModelPathRef.current = '';\n                }\n            })[\"LDRViewerComponent.useEffect\"];\n        }\n    }[\"LDRViewerComponent.useEffect\"], []);\n    // Update visibility based on current step\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"LDRViewerComponent.useEffect\": ()=>{\n            if (allPartsRef.current.length === 0) return;\n            console.log(`Updating visibility for step ${currentStep} of ${totalSteps}`);\n            // Show/hide parts based on current step\n            allPartsRef.current.forEach({\n                \"LDRViewerComponent.useEffect\": (part)=>{\n                    const partStep = part.userData.stepNumber || 1;\n                    part.visible = partStep <= currentStep;\n                }\n            }[\"LDRViewerComponent.useEffect\"]);\n        }\n    }[\"LDRViewerComponent.useEffect\"], [\n        currentStep,\n        totalSteps\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            position: 'relative',\n            width: '100%'\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: containerRef,\n                style: {\n                    width: '100%',\n                    height: '600px',\n                    border: '1px solid #ccc',\n                    borderRadius: '8px',\n                    overflow: 'hidden',\n                    position: 'relative'\n                },\n                children: loadError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        position: 'absolute',\n                        top: '50%',\n                        left: '50%',\n                        transform: 'translate(-50%, -50%)',\n                        backgroundColor: 'rgba(255, 255, 255, 0.95)',\n                        padding: '20px 30px',\n                        borderRadius: '8px',\n                        boxShadow: '0 2px 10px rgba(0, 0, 0, 0.1)',\n                        textAlign: 'center',\n                        zIndex: 100\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            style: {\n                                color: '#d32f2f',\n                                fontSize: '18px',\n                                fontWeight: '600',\n                                marginBottom: '8px'\n                            },\n                            children: [\n                                \" \",\n                                loadError.split('\\n')[0]\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                            lineNumber: 947,\n                            columnNumber: 13\n                        }, undefined),\n                        loadError.includes('\\n') && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            style: {\n                                color: '#666',\n                                fontSize: '14px',\n                                marginTop: '8px'\n                            },\n                            children: loadError.split('\\n')[1]\n                        }, void 0, false, {\n                            fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                            lineNumber: 958,\n                            columnNumber: 15\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                    lineNumber: 933,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                lineNumber: 921,\n                columnNumber: 7\n            }, undefined),\n            totalSteps > 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: 'absolute',\n                    bottom: '20px',\n                    left: '50%',\n                    transform: 'translateX(-50%)',\n                    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n                    padding: '15px 20px',\n                    borderRadius: '8px',\n                    boxShadow: '0 2px 10px rgba(0,0,0,0.2)',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '15px',\n                    minWidth: '400px',\n                    zIndex: 1000\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        style: {\n                            fontWeight: 'bold',\n                            fontSize: '14px',\n                            color: '#333',\n                            minWidth: '80px'\n                        },\n                        children: [\n                            \"Step \",\n                            currentStep,\n                            \"/\",\n                            totalSteps\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                        lineNumber: 987,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"range\",\n                        min: 1,\n                        max: totalSteps,\n                        value: currentStep,\n                        onChange: (e)=>setCurrentStep(parseInt(e.target.value)),\n                        style: {\n                            flex: 1,\n                            height: '6px',\n                            background: `linear-gradient(to right, #4CAF50 0%, #4CAF50 ${(currentStep - 1) / (totalSteps - 1) * 100}%, #ddd ${(currentStep - 1) / (totalSteps - 1) * 100}%, #ddd 100%)`,\n                            borderRadius: '3px',\n                            outline: 'none',\n                            cursor: 'pointer'\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                        lineNumber: 995,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        style: {\n                            display: 'flex',\n                            gap: '8px'\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>setCurrentStep(Math.max(1, currentStep - 1)),\n                                disabled: currentStep <= 1,\n                                style: {\n                                    padding: '6px 12px',\n                                    backgroundColor: currentStep > 1 ? '#4CAF50' : '#ccc',\n                                    color: 'white',\n                                    border: 'none',\n                                    borderRadius: '4px',\n                                    cursor: currentStep > 1 ? 'pointer' : 'not-allowed',\n                                    fontSize: '12px',\n                                    fontWeight: 'bold'\n                                },\n                                children: \" Prev\"\n                            }, void 0, false, {\n                                fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                                lineNumber: 1014,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>setCurrentStep(Math.min(totalSteps, currentStep + 1)),\n                                disabled: currentStep >= totalSteps,\n                                style: {\n                                    padding: '6px 12px',\n                                    backgroundColor: currentStep < totalSteps ? '#4CAF50' : '#ccc',\n                                    color: 'white',\n                                    border: 'none',\n                                    borderRadius: '4px',\n                                    cursor: currentStep < totalSteps ? 'pointer' : 'not-allowed',\n                                    fontSize: '12px',\n                                    fontWeight: 'bold'\n                                },\n                                children: \"Next \"\n                            }, void 0, false, {\n                                fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                                lineNumber: 1030,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>setCurrentStep(currentStep === totalSteps ? 1 : totalSteps),\n                                style: {\n                                    padding: '6px 12px',\n                                    backgroundColor: '#2196F3',\n                                    color: 'white',\n                                    border: 'none',\n                                    borderRadius: '4px',\n                                    cursor: 'pointer',\n                                    fontSize: '12px',\n                                    fontWeight: 'bold'\n                                },\n                                children: currentStep === totalSteps ? 'Reset' : 'All'\n                            }, void 0, false, {\n                                fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                                lineNumber: 1046,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                        lineNumber: 1010,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n                lineNumber: 972,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/gnome/lego/brickyard/components/LDRViewer.tsx\",\n        lineNumber: 920,\n        columnNumber: 5\n    }, undefined);\n};\nconst LDRViewer = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(LDRViewerComponent);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LDRViewer);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvTERSVmlld2VyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQ3hCO0FBQzhDO0FBQ0w7QUFDb0M7QUFRNUcsTUFBTVEscUJBQStDLENBQUMsRUFBRUMsU0FBUyxFQUFFQyxZQUFZLEVBQUVDLGNBQWMsRUFBRTtJQUMvRixNQUFNQyxlQUFlViw2Q0FBTUEsQ0FBaUI7SUFDNUMsTUFBTVcsV0FBV1gsNkNBQU1BLENBQXFCO0lBQzVDLE1BQU1ZLGNBQWNaLDZDQUFNQSxDQUE2QjtJQUN2RCxNQUFNYSxZQUFZYiw2Q0FBTUEsQ0FBaUM7SUFDekQsTUFBTWMsY0FBY2QsNkNBQU1BLENBQXVCO0lBQ2pELE1BQU1lLGdCQUFnQmYsNkNBQU1BLENBQXFCO0lBQ2pELE1BQU1nQixvQkFBb0JoQiw2Q0FBTUEsQ0FBOEI7SUFDOUQsTUFBTWlCLGVBQWVqQiw2Q0FBTUEsQ0FBVTtJQUNyQyxNQUFNa0Isc0JBQXNCbEIsNkNBQU1BLENBQVM7SUFDM0MsTUFBTW1CLG1CQUFtQm5CLDZDQUFNQSxDQUFVO0lBQ3pDLE1BQU1vQixnQkFBZ0JwQiw2Q0FBTUEsQ0FBUztJQUVyQyxzQ0FBc0M7SUFDdEMsTUFBTSxDQUFDcUIsV0FBV0MsYUFBYSxHQUFHeEIscURBQWMsQ0FBZ0I7SUFFaEUsNEJBQTRCO0lBQzVCLE1BQU0wQixzQkFBc0J4Qiw2Q0FBTUEsQ0FBdUI7SUFDekQsTUFBTXlCLG9CQUFvQnpCLDZDQUFNQSxDQUF1QjtJQUV2RCxlQUFlO0lBQ2YsTUFBTSxDQUFDMEIsYUFBYUMsZUFBZSxHQUFHN0IscURBQWMsQ0FBUztJQUM3RCxNQUFNLENBQUM4QixZQUFZQyxjQUFjLEdBQUcvQixxREFBYyxDQUFTO0lBQzNELE1BQU1nQyxXQUFXOUIsNkNBQU1BLENBQWdCLEVBQUU7SUFDekMsTUFBTStCLGNBQWMvQiw2Q0FBTUEsQ0FBbUIsRUFBRTtJQUUvQyxtQ0FBbUM7SUFDbkNELGdEQUFTQTt3Q0FBQztZ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cUMsUUFBUTtvQ0FDUkMsY0FBYztvQ0FDZDhCLFFBQVF6TixjQUFjLElBQUksWUFBWTtvQ0FDdENxTSxVQUFVO29DQUNWQyxZQUFZO2dDQUNkOzBDQUNEOzs7Ozs7MENBR0QsOERBQUNvQjtnQ0FDQ0MsU0FBUyxJQUFNMU4sZUFBZTBKLEtBQUtzRCxHQUFHLENBQUMvTSxZQUFZRixjQUFjO2dDQUNqRTROLFVBQVU1TixlQUFlRTtnQ0FDekJzTCxPQUFPO29DQUNMUyxTQUFTO29DQUNURCxpQkFBaUJoTSxjQUFjRSxhQUFhLFlBQVk7b0NBQ3hEbUosT0FBTztvQ0FDUHFDLFFBQVE7b0NBQ1JDLGNBQWM7b0NBQ2Q4QixRQUFRek4sY0FBY0UsYUFBYSxZQUFZO29DQUMvQ21NLFVBQVU7b0NBQ1ZDLFlBQVk7Z0NBQ2Q7MENBQ0Q7Ozs7OzswQ0FHRCw4REFBQ29CO2dDQUNDQyxTQUFTLElBQU0xTixlQUFlRCxnQkFBZ0JFLGFBQWEsSUFBSUE7Z0NBQy9Ec0wsT0FBTztvQ0FDTFMsU0FBUztvQ0FDVEQsaUJBQWlCO29DQUNqQjNDLE9BQU87b0NBQ1BxQyxRQUFRO29DQUNSQyxjQUFjO29DQUNkOEIsUUFBUTtvQ0FDUnBCLFVBQVU7b0NBQ1ZDLFlBQVk7Z0NBQ2Q7MENBRUN0TSxnQkFBZ0JFLGFBQWEsVUFBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT3REO0FBRUEsTUFBTTJOLDBCQUFZdFAsMkNBQUlBLENBQUNLO0FBQ3ZCLGlFQUFlaVAsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2dub21lL2xlZ28vYnJpY2t5YXJkL2NvbXBvbmVudHMvTERSVmlld2VyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIG1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgT3JiaXRDb250cm9scyB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9jb250cm9scy9PcmJpdENvbnRyb2xzLmpzJztcclxuaW1wb3J0IHsgTERyYXdMb2FkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9MRHJhd0xvYWRlci5qcyc7XHJcbmltcG9ydCB7IExEcmF3Q29uZGl0aW9uYWxMaW5lTWF0ZXJpYWwgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vbWF0ZXJpYWxzL0xEcmF3Q29uZGl0aW9uYWxMaW5lTWF0ZXJpYWwuanMnO1xyXG5cclxuaW50ZXJmYWNlIExEUlZpZXdlclByb3BzIHtcclxuICBtb2RlbFBhdGg/OiBzdHJpbmc7XHJcbiAgbGRyYXdDb250ZW50Pzogc3RyaW5nO1xyXG4gIHByZXNlcnZlQ2FtZXJhPzogYm9vbGVhbjtcclxufVxyXG5cclxuY29uc3QgTERSVmlld2VyQ29tcG9uZW50OiBSZWFjdC5GQzxMRFJWaWV3ZXJQcm9wcz4gPSAoeyBtb2RlbFBhdGgsIGxkcmF3Q29udGVudCwgcHJlc2VydmVDYW1lcmEgfSkgPT4ge1xyXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XHJcbiAgY29uc3Qgc2NlbmVSZWYgPSB1c2VSZWY8VEhSRUUuU2NlbmUgfCBudWxsPihudWxsKTtcclxuICBjb25zdCByZW5kZXJlclJlZiA9IHVzZVJlZjxUSFJFRS5XZWJHTFJlbmRlcmVyIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgY2FtZXJhUmVmID0gdXNlUmVmPFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgY29udHJvbHNSZWYgPSB1c2VSZWY8T3JiaXRDb250cm9scyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IG1vZGVsR3JvdXBSZWYgPSB1c2VSZWY8VEhSRUUuR3JvdXAgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBsb2FkaW5nTWFuYWdlclJlZiA9IHVzZVJlZjxUSFJFRS5Mb2FkaW5nTWFuYWdlciB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IGlzTG9hZGluZ1JlZiA9IHVzZVJlZjxib29sZWFuPihmYWxzZSk7XHJcbiAgY29uc3QgY3VycmVudE1vZGVsUGF0aFJlZiA9IHVzZVJlZjxzdHJpbmc+KCcnKTtcclxuICBjb25zdCBpc0luaXRpYWxpemVkUmVmID0gdXNlUmVmPGJvb2xlYW4+KGZhbHNlKTtcclxuICBjb25zdCBlcnJvckNvdW50UmVmID0gdXNlUmVmPG51bWJlcj4oMCk7XHJcblxyXG4gIC8vIEVycm9yIHN0YXRlIGZvciBkaXNwbGF5aW5nIG1lc3NhZ2VzXHJcbiAgY29uc3QgW2xvYWRFcnJvciwgc2V0TG9hZEVycm9yXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG5cclxuICAvLyBDYW1lcmEgc3RhdGUgcHJlc2VydmF0aW9uXHJcbiAgY29uc3Qgc2F2ZWRDYW1lcmFQb3NpdGlvbiA9IHVzZVJlZjxUSFJFRS5WZWN0b3IzIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3Qgc2F2ZWRDYW1lcmFUYXJnZXQgPSB1c2VSZWY8VEhSRUUuVmVjdG9yMyB8IG51bGw+KG51bGwpO1xyXG5cclxuICAvLyBTdGVwIGNvbnRyb2xcclxuICBjb25zdCBbY3VycmVudFN0ZXAsIHNldEN1cnJlbnRTdGVwXSA9IFJlYWN0LnVzZVN0YXRlPG51bWJlcj4oMSk7XHJcbiAgY29uc3QgW3RvdGFsU3RlcHMsIHNldFRvdGFsU3RlcHNdID0gUmVhY3QudXNlU3RhdGU8bnVtYmVyPigxKTtcclxuICBjb25zdCBzdGVwc1JlZiA9IHVzZVJlZjxUSFJFRS5Hcm91cFtdPihbXSk7XHJcbiAgY29uc3QgYWxsUGFydHNSZWYgPSB1c2VSZWY8VEhSRUUuT2JqZWN0M0RbXT4oW10pO1xyXG5cclxuICAvLyBDcmVhdGUgbG9hZGluZyBtYW5hZ2VyIG9ubHkgb25jZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAobG9hZGluZ01hbmFnZXJSZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgVEhSRUUuTG9hZGluZ01hbmFnZXIoKTtcclxuXHJcbiAgICAvLyBJbXBsZW1lbnQgcGF0aCByZXNvbHV0aW9uIHN0cmF0ZWd5IHNpbWlsYXIgdG8gVGhyZWUuanMgcGFja0xEcmF3TW9kZWxcclxuICAgIG1hbmFnZXIuc2V0VVJMTW9kaWZpZXIoKHVybCkgPT4ge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZygnT3JpZ2luYWwgVVJMOicsIHVybCk7XHJcblxyXG4gICAgICAvLyBOb3JtYWxpemUgcGF0aCBzZXBhcmF0b3JzXHJcbiAgICAgIGxldCBub3JtYWxpemVkID0gdXJsLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcclxuXHJcbiAgICAgIC8vIEhhbmRsZSBzXFwgcHJlZml4IGZvciBzdWJwYXJ0cyAoY29udmVydCBzXFxmaWxlLmRhdCB0byBzL2ZpbGUuZGF0KVxyXG4gICAgICBpZiAobm9ybWFsaXplZC5pbmNsdWRlcygncy8nKSB8fCBub3JtYWxpemVkLm1hdGNoKC9zW1xcXFxcXC9dLykpIHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IG5vcm1hbGl6ZWQuc3BsaXQoL1tcXFxcXFwvXS8pO1xyXG4gICAgICAgIGNvbnN0IGxhc3RUd28gPSBwYXJ0cy5zbGljZSgtMik7XHJcbiAgICAgICAgaWYgKGxhc3RUd29bMF0gPT09ICdzJykge1xyXG4gICAgICAgICAgLy8gVGhpcyBpcyBhIHN1YnBhcnQgcmVmZXJlbmNlXHJcbiAgICAgICAgICBub3JtYWxpemVkID0gYC9sZHJhdy9wYXJ0cy9zLyR7bGFzdFR3b1sxXX1gO1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ1N1YnBhcnQgZGV0ZWN0ZWQsIG5vcm1hbGl6ZWQgdG86Jywgbm9ybWFsaXplZCk7XHJcbiAgICAgICAgICByZXR1cm4gbm9ybWFsaXplZDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEV4dHJhY3QgdGhlIGZpbGVuYW1lIGFuZCBjaGVjayBmb3Igc3ViZGlyZWN0b3J5IChsaWtlIHMvKVxyXG4gICAgICBjb25zdCB1cmxQYXJ0cyA9IG5vcm1hbGl6ZWQuc3BsaXQoJy8nKTtcclxuICAgICAgY29uc3QgZmlsZW5hbWUgPSB1cmxQYXJ0c1t1cmxQYXJ0cy5sZW5ndGggLSAxXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBjb25zdCBoYXNTdWJkaXIgPSB1cmxQYXJ0cy5sZW5ndGggPj0gMiAmJiB1cmxQYXJ0c1t1cmxQYXJ0cy5sZW5ndGggLSAyXSA9PT0gJ3MnO1xyXG5cclxuICAgICAgLy8gRGVmaW5lIHBvc3NpYmxlIHBhdGggcHJlZml4ZXMgdG8gdHJ5XHJcbiAgICAgIGNvbnN0IHBhdGhQcmVmaXhlcyA9IFtcclxuICAgICAgICAnL291dHB1dC8nLCAgICAgICAgICAvLyBPdXRwdXQgZGlyZWN0b3J5IGZvciBnZW5lcmF0ZWQgbW9kZWxzXHJcbiAgICAgICAgJy9sZHJhdy8nLCAgICAgICAgICAgLy8gRGlyZWN0IHBhdGhcclxuICAgICAgICAnL2xkcmF3L3AvJywgICAgICAgICAvLyBQcmltaXRpdmVzXHJcbiAgICAgICAgJy9sZHJhdy9wYXJ0cy8nLCAgICAgLy8gUGFydHNcclxuICAgICAgXTtcclxuXHJcbiAgICAgIC8vIElmIHRoZSBVUkwgYWxyZWFkeSBoYXMgYSB2YWxpZCBwcmVmaXgsIGNsZWFuIGl0IHVwXHJcbiAgICAgIGZvciAoY29uc3QgcHJlZml4IG9mIHBhdGhQcmVmaXhlcykge1xyXG4gICAgICAgIGlmIChub3JtYWxpemVkLmluY2x1ZGVzKHByZWZpeCkpIHtcclxuICAgICAgICAgIC8vIENsZWFuIHVwIGFueSBkdXBsaWNhdGUgcGF0aCBzZWdtZW50c1xyXG4gICAgICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQucmVwbGFjZSgvXFwvbGRyYXdcXC9wYXJ0c1xcL3BhcnRzXFwvL2csICcvbGRyYXcvcGFydHMvJyk7XHJcbiAgICAgICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplZC5yZXBsYWNlKC9cXC9sZHJhd1xcL3BcXC9wXFwvL2csICcvbGRyYXcvcC8nKTtcclxuICAgICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnJlcGxhY2UoL1xcL291dHB1dFxcL291dHB1dFxcLy9nLCAnL291dHB1dC8nKTtcclxuXHJcbiAgICAgICAgICAvLyBSZW1vdmUgYW55IHJlZHVuZGFudCBwYXRoIGNvbWJpbmF0aW9ucyBidXQgcHJlc2VydmUgcy8gc3ViZGlyZWN0b3J5XHJcbiAgICAgICAgICBpZiAoIW5vcm1hbGl6ZWQuaW5jbHVkZXMoJy9zLycpKSB7XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnJlcGxhY2UoL1xcL2xkcmF3XFwvcGFydHNcXC9wXFwvL2csICcvbGRyYXcvcC8nKTtcclxuICAgICAgICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQucmVwbGFjZSgvXFwvb3V0cHV0XFwvcFxcLy9nLCAnL2xkcmF3L3AvJyk7XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnJlcGxhY2UoL1xcL2xkcmF3XFwvcFxcL3BhcnRzXFwvL2csICcvbGRyYXcvcGFydHMvJyk7XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnJlcGxhY2UoL1xcL291dHB1dFxcL3BhcnRzXFwvL2csICcvbGRyYXcvcGFydHMvJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBIYW5kbGUgc3VicGFydHMgaW4gcy8gZGlyZWN0b3J5XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnJlcGxhY2UoL1xcL2xkcmF3XFwvcGFydHNcXC9wYXJ0c1xcL3NcXC8vZywgJy9sZHJhdy9wYXJ0cy9zLycpO1xyXG4gICAgICAgICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplZC5yZXBsYWNlKC9cXC9sZHJhd1xcL3BcXC9wYXJ0c1xcL3NcXC8vZywgJy9sZHJhdy9wYXJ0cy9zLycpO1xyXG4gICAgICAgICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplZC5yZXBsYWNlKC9cXC9vdXRwdXRcXC9wYXJ0c1xcL3NcXC8vZywgJy9sZHJhdy9wYXJ0cy9zLycpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdOb3JtYWxpemVkIFVSTDonLCBub3JtYWxpemVkKTtcclxuICAgICAgICAgIHJldHVybiBub3JtYWxpemVkO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgbm8gdmFsaWQgcHJlZml4IGZvdW5kLCB0cnkgdG8gY29uc3RydWN0IHRoZSBwYXRoXHJcbiAgICAgIC8vIFRoaXMgaGFuZGxlcyBjYXNlcyB3aGVyZSB0aGUgVVJMIGlzIGp1c3QgYSBmaWxlbmFtZSBvciByZWxhdGl2ZSBwYXRoXHJcbiAgICAgIGlmICghbm9ybWFsaXplZC5zdGFydHNXaXRoKCcvbGRyYXcvJykpIHtcclxuICAgICAgICAvLyBIYW5kbGUgc3VicGFydHMgKGZpbGVzIGluIHMvIGRpcmVjdG9yeSlcclxuICAgICAgICBpZiAoaGFzU3ViZGlyKSB7XHJcbiAgICAgICAgICBub3JtYWxpemVkID0gYC9sZHJhdy9wYXJ0cy9zLyR7ZmlsZW5hbWV9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIHByaW1pdGl2ZSAodXN1YWxseSBzdGFydCB3aXRoIG51bWJlcnMgb3Igc3BlY2lmaWMgcGF0dGVybnMpXHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZW5hbWUubWF0Y2goL15cXGQvKSB8fCBmaWxlbmFtZS5zdGFydHNXaXRoKCdzdHVkJykgfHwgZmlsZW5hbWUuc3RhcnRzV2l0aCgnZWRnZScpKSB7XHJcbiAgICAgICAgICBub3JtYWxpemVkID0gYC9sZHJhdy9wLyR7ZmlsZW5hbWV9YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRGVmYXVsdCB0byBwYXJ0cyBkaXJlY3RvcnkgZm9yIG90aGVyIC5kYXQgZmlsZXNcclxuICAgICAgICBlbHNlIGlmIChmaWxlbmFtZS5lbmRzV2l0aCgnLmRhdCcpKSB7XHJcbiAgICAgICAgICBub3JtYWxpemVkID0gYC9sZHJhdy9wYXJ0cy8ke2ZpbGVuYW1lfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEZvciBMRFIgZmlsZXMsIHVzZSBvdXRwdXQgZGlyZWN0b3J5XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsZW5hbWUuZW5kc1dpdGgoJy5sZHInKSB8fCBmaWxlbmFtZS5lbmRzV2l0aCgnLm1wZCcpKSB7XHJcbiAgICAgICAgICBub3JtYWxpemVkID0gYC9vdXRwdXQvJHtmaWxlbmFtZX1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnQ29uc3RydWN0ZWQgVVJMOicsIG5vcm1hbGl6ZWQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbm9ybWFsaXplZDtcclxuICAgIH0pO1xyXG5cclxuICAgIGxvYWRpbmdNYW5hZ2VyUmVmLmN1cnJlbnQgPSBtYW5hZ2VyO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIG1hbmFnZXIuc2V0VVJMTW9kaWZpZXIodW5kZWZpbmVkKTtcclxuICAgICAgbG9hZGluZ01hbmFnZXJSZWYuY3VycmVudCA9IG51bGw7XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghY29udGFpbmVyUmVmLmN1cnJlbnQgfHwgaXNJbml0aWFsaXplZFJlZi5jdXJyZW50KSByZXR1cm47XHJcblxyXG4gICAgaXNJbml0aWFsaXplZFJlZi5jdXJyZW50ID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJSZWYuY3VycmVudDtcclxuICAgIGNvbnN0IHdpZHRoID0gY29udGFpbmVyLmNsaWVudFdpZHRoO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gY29udGFpbmVyLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICBjb25zdCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xyXG4gICAgc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBUSFJFRS5Db2xvcigweGVlZWVlZSk7XHJcbiAgICBzY2VuZVJlZi5jdXJyZW50ID0gc2NlbmU7XHJcblxyXG4gICAgLy8gQ2FtZXJhIHdpdGggc2V0dGluZ3Mgb3B0aW1pemVkIGZvciBsYXJnZSBMRUdPIG1vZGVsc1xyXG4gICAgY29uc3QgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB3aWR0aCAvIGhlaWdodCwgMC4xLCAxMDAwMDApO1xyXG4gICAgY2FtZXJhLnBvc2l0aW9uLnNldCgzMDAsIDQwMCwgNzAwKTtcclxuICAgIGNhbWVyYVJlZi5jdXJyZW50ID0gY2FtZXJhO1xyXG5cclxuICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IHRydWUgfSk7XHJcbiAgICByZW5kZXJlci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcbiAgICByZW5kZXJlclJlZi5jdXJyZW50ID0gcmVuZGVyZXI7XHJcblxyXG4gICAgY29uc3QgY29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyhjYW1lcmEsIHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG4gICAgY29udHJvbHMuZW5hYmxlRGFtcGluZyA9IHRydWU7XHJcbiAgICBjb250cm9scy5kYW1waW5nRmFjdG9yID0gMC4wNTtcclxuICAgIGNvbnRyb2xzLmVuYWJsZVBhbiA9IHRydWU7XHJcbiAgICBjb250cm9scy5lbmFibGVSb3RhdGUgPSB0cnVlO1xyXG4gICAgY29udHJvbHMuZW5hYmxlWm9vbSA9IHRydWU7XHJcbiAgICBjb250cm9scy5zY3JlZW5TcGFjZVBhbm5pbmcgPSBmYWxzZTtcclxuICAgIGNvbnRyb2xzLm1pbkRpc3RhbmNlID0gMTA7XHJcbiAgICBjb250cm9scy5tYXhEaXN0YW5jZSA9IDUwMDAwOyAgLy8gR3JlYXRseSBpbmNyZWFzZWQgbWF4IHpvb20gb3V0IGRpc3RhbmNlXHJcbiAgICBjb250cm9scy50YXJnZXQuc2V0KDAsIDAsIDApO1xyXG4gICAgY29udHJvbHNSZWYuY3VycmVudCA9IGNvbnRyb2xzO1xyXG5cclxuICAgIC8vIEVuaGFuY2VkIGxpZ2h0aW5nIGZvciBiZXR0ZXIgdmlzaWJpbGl0eVxyXG4gICAgc2NlbmUuYWRkKG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDAuOSkpOyAvLyBCcmlnaHRlciBhbWJpZW50IGxpZ2h0XHJcblxyXG4gICAgLy8gTWFpbiBkaXJlY3Rpb25hbCBsaWdodFxyXG4gICAgY29uc3QgZGlyTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMS4wKTtcclxuICAgIGRpckxpZ2h0LnBvc2l0aW9uLnNldCg1MDAsIDEwMDAsIDUwMCk7XHJcbiAgICBkaXJMaWdodC5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICBzY2VuZS5hZGQoZGlyTGlnaHQpO1xyXG5cclxuICAgIC8vIEFkZGl0aW9uYWwgZmlsbCBsaWdodHMgZnJvbSBkaWZmZXJlbnQgYW5nbGVzXHJcbiAgICBjb25zdCBmaWxsTGlnaHQxID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuNSk7XHJcbiAgICBmaWxsTGlnaHQxLnBvc2l0aW9uLnNldCgtNTAwLCA1MDAsIC01MDApO1xyXG4gICAgc2NlbmUuYWRkKGZpbGxMaWdodDEpO1xyXG5cclxuICAgIGNvbnN0IGZpbGxMaWdodDIgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMC41KTtcclxuICAgIGZpbGxMaWdodDIucG9zaXRpb24uc2V0KDUwMCwgNTAwLCAtNTAwKTtcclxuICAgIHNjZW5lLmFkZChmaWxsTGlnaHQyKTtcclxuXHJcbiAgICAvLyBBZGQgYSBoZW1pc3BoZXJlIGxpZ2h0IGZvciBtb3JlIG5hdHVyYWwgbGlnaHRpbmdcclxuICAgIGNvbnN0IGhlbWlMaWdodCA9IG5ldyBUSFJFRS5IZW1pc3BoZXJlTGlnaHQoMHhmZmZmZmYsIDB4Y2NjY2NjLCAwLjQpO1xyXG4gICAgaGVtaUxpZ2h0LnBvc2l0aW9uLnNldCgwLCA1MDAsIDApO1xyXG4gICAgc2NlbmUuYWRkKGhlbWlMaWdodCk7XHJcblxyXG4gICAgLy8gR3JpZCBoZWxwZXIgcmVtb3ZlZFxyXG4gICAgLy8gY29uc3QgZ3JpZEhlbHBlciA9IG5ldyBUSFJFRS5HcmlkSGVscGVyKDEwMDAsIDIwKTtcclxuICAgIC8vIHNjZW5lLmFkZChncmlkSGVscGVyKTtcclxuXHJcbiAgICAvLyBBZGQgYXhlcyBoZWxwZXJcclxuICAgIGNvbnN0IGF4ZXNIZWxwZXIgPSBuZXcgVEhSRUUuQXhlc0hlbHBlcig1MDApO1xyXG4gICAgc2NlbmUuYWRkKGF4ZXNIZWxwZXIpO1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZVJlc2l6ZSA9ICgpID0+IHtcclxuICAgICAgaWYgKCFjb250YWluZXJSZWYuY3VycmVudCB8fCAhY2FtZXJhUmVmLmN1cnJlbnQgfHwgIXJlbmRlcmVyUmVmLmN1cnJlbnQpIHJldHVybjtcclxuICAgICAgY29uc3QgdyA9IGNvbnRhaW5lclJlZi5jdXJyZW50LmNsaWVudFdpZHRoO1xyXG4gICAgICBjb25zdCBoID0gY29udGFpbmVyUmVmLmN1cnJlbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgICByZW5kZXJlclJlZi5jdXJyZW50LnNldFNpemUodywgaCk7XHJcbiAgICAgIGNhbWVyYVJlZi5jdXJyZW50LmFzcGVjdCA9IHcgLyBoO1xyXG4gICAgICBjYW1lcmFSZWYuY3VycmVudC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVSZXNpemUpO1xyXG5cclxuICAgIC8vIEFuaW1hdGlvbiBsb29wIGlzIG5vdyBoYW5kbGVkIGluIHRoZSBjdWJlIGVmZmVjdFxyXG4gICAgY29uc29sZS5sb2coJ1NjZW5lIGluaXRpYWxpemVkJyk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVJlc2l6ZSk7XHJcbiAgICAgIC8vIEtlZXAgcmVuZGVyZXIgaW50YWN0IGJ1dCBjbGVhbiB1cCBldmVudCBsaXN0ZW5lclxyXG4gICAgICAvLyBpZiAocmVuZGVyZXJSZWYuY3VycmVudCAmJiBjb250YWluZXJSZWYuY3VycmVudCkge1xyXG4gICAgICAvLyAgIGNvbnRhaW5lclJlZi5jdXJyZW50LnJlbW92ZUNoaWxkKHJlbmRlcmVyUmVmLmN1cnJlbnQuZG9tRWxlbWVudCk7XHJcbiAgICAgIC8vICAgcmVuZGVyZXJSZWYuY3VycmVudC5kaXNwb3NlKCk7XHJcbiAgICAgIC8vIH1cclxuICAgICAgLy8gaXNJbml0aWFsaXplZFJlZi5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gQW5pbWF0aW9uIGxvb3AgLSB1c2luZyB1c2VSZWYgdG8gZW5zdXJlIHNpbmdsZSBpbnN0YW5jZVxyXG4gIGNvbnN0IGFuaW1hdGlvbklkUmVmID0gdXNlUmVmPG51bWJlciB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IGlzQW5pbWF0aW5nUmVmID0gdXNlUmVmPGJvb2xlYW4+KGZhbHNlKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghc2NlbmVSZWYuY3VycmVudCB8fCAhcmVuZGVyZXJSZWYuY3VycmVudCB8fCAhY2FtZXJhUmVmLmN1cnJlbnQgfHwgIWNvbnRyb2xzUmVmLmN1cnJlbnQpIHJldHVybjtcclxuXHJcbiAgICAvLyBQcmV2ZW50IG11bHRpcGxlIGFuaW1hdGlvbiBsb29wc1xyXG4gICAgaWYgKGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0FuaW1hdGlvbiBhbHJlYWR5IHJ1bm5pbmcsIHNraXBwaW5nLi4uJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb21tZW50ZWQgb3V0IGNhbmNlbGxhdGlvblxyXG4gICAgLy8gaWYgKGFuaW1hdGlvbklkUmVmLmN1cnJlbnQgIT09IG51bGwpIHtcclxuICAgIC8vICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uSWRSZWYuY3VycmVudCk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgaXNBbmltYXRpbmdSZWYuY3VycmVudCA9IHRydWU7XHJcblxyXG4gICAgY29uc3QgYW5pbWF0ZSA9ICgpID0+IHtcclxuICAgICAgaWYgKCFpc0FuaW1hdGluZ1JlZi5jdXJyZW50KSByZXR1cm47XHJcblxyXG4gICAgICAvLyBDaGVjayBhbGwgcmVmcyBiZWZvcmUgc2NoZWR1bGluZyBuZXh0IGZyYW1lXHJcbiAgICAgIGlmICghY29udHJvbHNSZWYuY3VycmVudCB8fCAhcmVuZGVyZXJSZWYuY3VycmVudCB8fCAhc2NlbmVSZWYuY3VycmVudCB8fCAhY2FtZXJhUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0FuaW1hdGlvbiBsb29wIHN0b3BwZWQ6IG1pc3NpbmcgcmVmcycpO1xyXG4gICAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFuaW1hdGlvbklkUmVmLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIE9ubHkgdmFsaWRhdGUgc2NlbmUgaWYgd2UndmUgaGFkIHJlY2VudCBlcnJvcnNcclxuICAgICAgICBpZiAoZXJyb3JDb3VudFJlZi5jdXJyZW50ID4gMCAmJiBlcnJvckNvdW50UmVmLmN1cnJlbnQgPCA1KSB7XHJcbiAgICAgICAgICBsZXQgaGFzTnVsbENoaWxkcmVuID0gZmFsc2U7XHJcbiAgICAgICAgICBsZXQgbnVsbENoZWNrQ291bnQgPSAwO1xyXG4gICAgICAgICAgc2NlbmVSZWYuY3VycmVudC50cmF2ZXJzZSgoY2hpbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBudWxsQ2hlY2tDb3VudCsrO1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgb2JqZWN0IGl0c2VsZiBoYXMgcmVxdWlyZWQgcHJvcGVydGllc1xyXG4gICAgICAgICAgICBpZiAoIWNoaWxkLmhhc093blByb3BlcnR5KCd2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdPYmplY3QgbWlzc2luZyB2aXNpYmxlIHByb3BlcnR5OicsIGNoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuW2ldID09PSBudWxsIHx8IGNoaWxkLmNoaWxkcmVuW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRm91bmQgbnVsbC91bmRlZmluZWQgY2hpbGQgaW4gc2NlbmUgYXQgaW5kZXgnLCBpLCAnb2YgcGFyZW50OicsIGNoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgaGFzTnVsbENoaWxkcmVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBudWxsIGNoaWxkXHJcbiAgICAgICAgICAgICAgICAgIGNoaWxkLmNoaWxkcmVuLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgaS0tOyAvLyBBZGp1c3QgaW5kZXggYWZ0ZXIgcmVtb3ZhbFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaWYgKGhhc051bGxDaGlsZHJlbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NsZWFuZWQgbnVsbCBjaGlsZHJlbiBmcm9tIHNjZW5lIGdyYXBoIGFmdGVyIGNoZWNraW5nJywgbnVsbENoZWNrQ291bnQsICdvYmplY3RzJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgY29udHJvbHMgYW5kIHJlbmRlclxyXG4gICAgICAgIC8vIFZhbGlkYXRlIGNvbnRyb2xzIHN0YXRlIGJlZm9yZSB1cGRhdGluZ1xyXG4gICAgICAgIGlmIChjb250cm9sc1JlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAvLyBDaGVjayBpZiBjb250cm9scyB0YXJnZXQgaXMgdmFsaWRcclxuICAgICAgICAgIGlmICghaXNGaW5pdGUoY29udHJvbHNSZWYuY3VycmVudC50YXJnZXQueCkgfHxcclxuICAgICAgICAgICAgICAhaXNGaW5pdGUoY29udHJvbHNSZWYuY3VycmVudC50YXJnZXQueSkgfHxcclxuICAgICAgICAgICAgICAhaXNGaW5pdGUoY29udHJvbHNSZWYuY3VycmVudC50YXJnZXQueikpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdPcmJpdENvbnRyb2xzIHRhcmdldCBiZWNhbWUgaW52YWxpZCwgcmVzZXR0aW5nIHRvIG9yaWdpbicpO1xyXG4gICAgICAgICAgICBjb250cm9sc1JlZi5jdXJyZW50LnRhcmdldC5zZXQoMCwgMCwgMCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29udHJvbHNSZWYuY3VycmVudC51cGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENsZWFuIHVwIGFueSBudWxsIG9iamVjdHMgaW4gdGhlIHNjZW5lIGJlZm9yZSByZW5kZXJpbmdcclxuICAgICAgICBjb25zdCBjbGVhbnVwTnVsbE9iamVjdHMgPSAob2JqOiBUSFJFRS5PYmplY3QzRCkgPT4ge1xyXG4gICAgICAgICAgaWYgKCFvYmogfHwgIW9iai5jaGlsZHJlbikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIC8vIEZpbHRlciBvdXQgbnVsbC91bmRlZmluZWQgY2hpbGRyZW5cclxuICAgICAgICAgIGNvbnN0IHZhbGlkQ2hpbGRyZW4gPSBbXTtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gb2JqLmNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQgIT09IG51bGwgJiYgY2hpbGQgIT09IHVuZGVmaW5lZCAmJiBjaGlsZC52aXNpYmxlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICB2YWxpZENoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG4gICAgICAgICAgICAgIGNsZWFudXBOdWxsT2JqZWN0cyhjaGlsZCk7IC8vIFJlY3Vyc2l2ZWx5IGNsZWFuIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZ1xyXG4gICAgICAgICAgaWYgKHZhbGlkQ2hpbGRyZW4ubGVuZ3RoICE9PSBvYmouY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIG9iai5jaGlsZHJlbiA9IHZhbGlkQ2hpbGRyZW47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHNjZW5lUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGNsZWFudXBOdWxsT2JqZWN0cyhzY2VuZVJlZi5jdXJyZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlcmVyUmVmLmN1cnJlbnQucmVuZGVyKHNjZW5lUmVmLmN1cnJlbnQsIGNhbWVyYVJlZi5jdXJyZW50KTtcclxuXHJcbiAgICAgICAgLy8gUmVzZXQgZXJyb3IgY291bnRlciBvbiBzdWNjZXNzZnVsIHJlbmRlclxyXG4gICAgICAgIGlmIChlcnJvckNvdW50UmVmLmN1cnJlbnQgPiAwKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnUmVuZGVyaW5nIHJlY292ZXJlZCBhZnRlcicsIGVycm9yQ291bnRSZWYuY3VycmVudCwgJ2Vycm9ycycpO1xyXG4gICAgICAgICAgZXJyb3JDb3VudFJlZi5jdXJyZW50ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgZXJyb3JDb3VudFJlZi5jdXJyZW50ID0gKGVycm9yQ291bnRSZWYuY3VycmVudCB8fCAwKSArIDE7XHJcblxyXG4gICAgICAgIGlmIChlcnJvckNvdW50UmVmLmN1cnJlbnQgPT09IDEpIHtcclxuICAgICAgICAgIC8vIE9ubHkgbG9nIGRldGFpbGVkIGluZm8gb24gZmlyc3QgZXJyb3JcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpcnN0IGVycm9yIGluIGFuaW1hdGlvbiBsb29wOicsIGVycm9yKTtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NjZW5lIGNoaWxkcmVuIGNvdW50OicsIHNjZW5lUmVmLmN1cnJlbnQuY2hpbGRyZW4ubGVuZ3RoKTtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NjZW5lIHN0YXRlOicsIHNjZW5lUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignQ2FtZXJhIHN0YXRlOicsIGNhbWVyYVJlZi5jdXJyZW50KTtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnRyb2xzIHN0YXRlOicsIGNvbnRyb2xzUmVmLmN1cnJlbnQpO1xyXG5cclxuICAgICAgICAgIC8vIExvZyB0aGUgbW9kZWwgZ3JvdXAgc3RhdGVcclxuICAgICAgICAgIGlmIChtb2RlbEdyb3VwUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTW9kZWwgZ3JvdXAgc3RhdGU6JywgbW9kZWxHcm91cFJlZi5jdXJyZW50KTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTW9kZWwgdmlzaWJsZTonLCBtb2RlbEdyb3VwUmVmLmN1cnJlbnQudmlzaWJsZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vZGVsIGNoaWxkcmVuIGNvdW50OicsIG1vZGVsR3JvdXBSZWYuY3VycmVudC5jaGlsZHJlbi5sZW5ndGgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RvcCBhbmltYXRpb24gYWZ0ZXIgdG9vIG1hbnkgZXJyb3JzXHJcbiAgICAgICAgaWYgKGVycm9yQ291bnRSZWYuY3VycmVudCA+IDEwMCkge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignVG9vIG1hbnkgcmVuZGVyIGVycm9ycywgc3RvcHBpbmcgYW5pbWF0aW9uIGxvb3AnKTtcclxuICAgICAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gU3RhcnQgdGhlIGFuaW1hdGlvbiBsb29wXHJcbiAgICBhbmltYXRlKCk7XHJcbiAgICBjb25zb2xlLmxvZygnQW5pbWF0aW9uIGxvb3Agc3RhcnRlZCcpO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIC8vIFByb3Blcmx5IGNsZWFuIHVwIGFuaW1hdGlvbiBsb29wXHJcbiAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgaWYgKGFuaW1hdGlvbklkUmVmLmN1cnJlbnQgIT09IG51bGwpIHtcclxuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25JZFJlZi5jdXJyZW50KTtcclxuICAgICAgICBhbmltYXRpb25JZFJlZi5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIFRlc3QgY3ViZSBjb21tZW50ZWQgb3V0IC0gTEVHTyBtb2RlbCBzaG91bGQgbG9hZCBpbnN0ZWFkXHJcbiAgLypcclxuICBjb25zdCBjdWJlUmVmID0gdXNlUmVmPFRIUkVFLk1lc2ggfCBudWxsPihudWxsKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghc2NlbmVSZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgIC8vIFByZXZlbnQgYWRkaW5nIGN1YmUgbXVsdGlwbGUgdGltZXNcclxuICAgIGlmIChjdWJlUmVmLmN1cnJlbnQpIHJldHVybjtcclxuXHJcbiAgICAvLyBBZGQgYSBzaW1wbGUgcmVkIGN1YmUgdGhhdCB3ZSBrbm93IHdvcmtzXHJcbiAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgzMCwgMzAsIDMwKTtcclxuICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtcclxuICAgICAgY29sb3I6IDB4ZmYwMDAwLFxyXG4gICAgICBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGN1YmUgPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xyXG4gICAgY3ViZS5wb3NpdGlvbi5zZXQoMCwgMzAwLCAwKTtcclxuXHJcbiAgICBzY2VuZVJlZi5jdXJyZW50LmFkZChjdWJlKTtcclxuXHJcbiAgICBjdWJlUmVmLmN1cnJlbnQgPSBjdWJlO1xyXG4gICAgY29uc29sZS5sb2coJ1NpbXBsZSB0ZXN0IGN1YmUgYWRkZWQgYXQ6JywgY3ViZS5wb3NpdGlvbik7XHJcbiAgICBjb25zb2xlLmxvZygnU2NlbmUgbm93IGhhcycsIHNjZW5lUmVmLmN1cnJlbnQuY2hpbGRyZW4ubGVuZ3RoLCAnY2hpbGRyZW4nKTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAvLyBDb21tZW50ZWQgb3V0IGNsZWFudXAgdG8ga2VlcCB0aGUgY3ViZSB2aXNpYmxlXHJcbiAgICAgIC8vIGlmIChzY2VuZVJlZi5jdXJyZW50ICYmIGN1YmUpIHtcclxuICAgICAgLy8gICBzY2VuZVJlZi5jdXJyZW50LnJlbW92ZShjdWJlKTsgIC8vIEFsc28gbmVlZCB0byBwcmV2ZW50IHJlbW92YWwgZnJvbSBzY2VuZVxyXG4gICAgICAvLyAgIGdlb21ldHJ5LmRpc3Bvc2UoKTtcclxuICAgICAgLy8gICBtYXRlcmlhbC5kaXNwb3NlKCk7XHJcbiAgICAgIC8vIH1cclxuICAgICAgLy8gY3ViZVJlZi5jdXJyZW50ID0gbnVsbDtcclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG4gICovXHJcblxyXG4gIC8vIEN1YmUgYW5pbWF0aW9uIGNvbW1lbnRlZCBvdXQgc2luY2UgY3ViZSBpcyByZW1vdmVkXHJcbiAgLypcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgYW5pbWF0ZSA9ICgpID0+IHtcclxuICAgICAgaWYgKGN1YmVSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGN1YmVSZWYuY3VycmVudC5yb3RhdGlvbi54ICs9IDAuMDE7XHJcbiAgICAgICAgY3ViZVJlZi5jdXJyZW50LnJvdGF0aW9uLnkgKz0gMC4wMTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBpZCA9IHNldEludGVydmFsKGFuaW1hdGUsIDE2KTsgLy8gfjYwZnBzXHJcblxyXG4gICAgLy8gQ29tbWVudGVkIG91dCBpbnRlcnZhbCBjbGVhbnVwXHJcbiAgICAvLyByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChpZCk7XHJcbiAgICByZXR1cm4gKCkgPT4ge307XHJcbiAgfSwgW10pO1xyXG4gICovXHJcblxyXG4gIC8vIExFR08gTE9BRElORyBDT0RFXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIE5lZWQgZWl0aGVyIG1vZGVsUGF0aCBvciBsZHJhd0NvbnRlbnRcclxuICAgIGlmICgoIW1vZGVsUGF0aCAmJiAhbGRyYXdDb250ZW50KSB8fCAhc2NlbmVSZWYuY3VycmVudCB8fCAhcmVuZGVyZXJSZWYuY3VycmVudCB8fCAhY2FtZXJhUmVmLmN1cnJlbnQpIHJldHVybjtcclxuXHJcbiAgICAvLyBTa2lwIGlmIHdlJ3JlIGFscmVhZHkgbG9hZGluZyB0aGlzIGV4YWN0IG1vZGVsXHJcbiAgICBjb25zdCBjdXJyZW50SWRlbnRpZmllciA9IGxkcmF3Q29udGVudCA/IGBjb250ZW50LSR7bGRyYXdDb250ZW50LnN1YnN0cmluZygwLCAxMDApfWAgOiBtb2RlbFBhdGg7XHJcbiAgICBpZiAoY3VycmVudE1vZGVsUGF0aFJlZi5jdXJyZW50ID09PSBjdXJyZW50SWRlbnRpZmllciAmJiBpc0xvYWRpbmdSZWYuY3VycmVudCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnU2FtZSBtb2RlbCBhbHJlYWR5IGxvYWRpbmcsIHNraXBwaW5nLi4uJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTa2lwIGlmIHRoaXMgbW9kZWwgaXMgYWxyZWFkeSBsb2FkZWRcclxuICAgIGlmIChjdXJyZW50TW9kZWxQYXRoUmVmLmN1cnJlbnQgPT09IGN1cnJlbnRJZGVudGlmaWVyICYmIG1vZGVsR3JvdXBSZWYuY3VycmVudCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnTW9kZWwgYWxyZWFkeSBsb2FkZWQsIHNraXBwaW5nLi4uJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcmV2ZW50IGNvbmN1cnJlbnQgbG9hZHNcclxuICAgIGlmIChpc0xvYWRpbmdSZWYuY3VycmVudCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnQW5vdGhlciBtb2RlbCBpcyBsb2FkaW5nLCBza2lwcGluZy4uLicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2F2ZSBjYW1lcmEgc3RhdGUgYmVmb3JlIHJlbW92aW5nIG1vZGVsIGlmIHByZXNlcnZlQ2FtZXJhIGlzIHRydWVcclxuICAgIGlmIChwcmVzZXJ2ZUNhbWVyYSAmJiBjYW1lcmFSZWYuY3VycmVudCAmJiBjb250cm9sc1JlZi5jdXJyZW50KSB7XHJcbiAgICAgIHNhdmVkQ2FtZXJhUG9zaXRpb24uY3VycmVudCA9IGNhbWVyYVJlZi5jdXJyZW50LnBvc2l0aW9uLmNsb25lKCk7XHJcbiAgICAgIHNhdmVkQ2FtZXJhVGFyZ2V0LmN1cnJlbnQgPSBjb250cm9sc1JlZi5jdXJyZW50LnRhcmdldC5jbG9uZSgpO1xyXG4gICAgICBjb25zb2xlLmxvZygnU2F2ZWQgY2FtZXJhIHBvc2l0aW9uOicsIHNhdmVkQ2FtZXJhUG9zaXRpb24uY3VycmVudCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTYXZlZCBjYW1lcmEgdGFyZ2V0OicsIHNhdmVkQ2FtZXJhVGFyZ2V0LmN1cnJlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENsZWFuIHVwIHByZXZpb3VzIG1vZGVsIHNhZmVseVxyXG4gICAgaWYgKG1vZGVsR3JvdXBSZWYuY3VycmVudCAmJiBzY2VuZVJlZi5jdXJyZW50KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZW1vdmluZyBwcmV2aW91cyBtb2RlbCBmcm9tIHNjZW5lJyk7XHJcbiAgICAgIC8vIE1hcmsgYXMgaW52aXNpYmxlIGZpcnN0IHRvIHByZXZlbnQgcmVuZGVyIGlzc3Vlc1xyXG4gICAgICBtb2RlbEdyb3VwUmVmLmN1cnJlbnQudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIGZyb20gc2NlbmUgb24gbmV4dCB0aWNrXHJcbiAgICAgIGNvbnN0IG1vZGVsVG9SZW1vdmUgPSBtb2RlbEdyb3VwUmVmLmN1cnJlbnQ7XHJcbiAgICAgIG1vZGVsR3JvdXBSZWYuY3VycmVudCA9IG51bGw7XHJcblxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBpZiAoc2NlbmVSZWYuY3VycmVudCAmJiBtb2RlbFRvUmVtb3ZlKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnQWN0dWFsbHkgcmVtb3ZpbmcgbW9kZWwgYW5kIGRpc3Bvc2luZyByZXNvdXJjZXMnKTtcclxuICAgICAgICAgIHNjZW5lUmVmLmN1cnJlbnQucmVtb3ZlKG1vZGVsVG9SZW1vdmUpO1xyXG4gICAgICAgICAgLy8gRGlzcG9zZSBvZiBnZW9tZXRyaWVzIGFuZCBtYXRlcmlhbHMgaWYgbmVlZGVkXHJcbiAgICAgICAgICBtb2RlbFRvUmVtb3ZlLnRyYXZlcnNlKChjaGlsZDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5nZW9tZXRyeSkgY2hpbGQuZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQubWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZC5tYXRlcmlhbCkpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLmZvckVhY2goKG1hdDogYW55KSA9PiBtYXQuZGlzcG9zZSgpKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTW9kZWwgcmVtb3ZhbCBjb21wbGV0ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJldmVudCBtdWx0aXBsZSBsb2FkcyBvZiB0aGUgc2FtZSBtb2RlbFxyXG4gICAgbGV0IGNhbmNlbGxlZCA9IGZhbHNlO1xyXG4gICAgaXNMb2FkaW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xyXG4gICAgY3VycmVudE1vZGVsUGF0aFJlZi5jdXJyZW50ID0gY3VycmVudElkZW50aWZpZXIgfHwgJ2dlbmVyYXRlZCc7XHJcblxyXG4gICAgLy8gQ2xlYXIgYW55IHByZXZpb3VzIGVycm9yXHJcbiAgICBzZXRMb2FkRXJyb3IobnVsbCk7XHJcblxyXG4gICAgY29uc3QgbG9hZGVyID0gbmV3IExEcmF3TG9hZGVyKGxvYWRpbmdNYW5hZ2VyUmVmLmN1cnJlbnQgPz8gdW5kZWZpbmVkKTtcclxuXHJcbiAgICAvLyBTZXQgdGhlIHBhcnRzIGxpYnJhcnkgcGF0aCB0byB0aGUgbGRyYXcgZGlyZWN0b3J5XHJcbiAgICBsb2FkZXIuc2V0UGFydHNMaWJyYXJ5UGF0aCgnL2xkcmF3LycpO1xyXG5cclxuICAgIC8vIEVuYWJsZSBzbW9vdGggbm9ybWFscyBmb3IgYmV0dGVyIHJlbmRlcmluZ1xyXG4gICAgbG9hZGVyLnNtb290aE5vcm1hbHMgPSB0cnVlO1xyXG5cclxuICAgIC8vIFNldCB0aGUgZmlsZSBtYXAgZm9yIGJldHRlciBwYXJ0IHJlc29sdXRpb25cclxuICAgIGxvYWRlci5zZXRGaWxlTWFwKHt9KTtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGNvbmRpdGlvbmFsIGxpbmUgbWF0ZXJpYWwgY2xhc3MgKG5vdCBhbiBpbnN0YW5jZSlcclxuICAgIGxvYWRlci5zZXRDb25kaXRpb25hbExpbmVNYXRlcmlhbChMRHJhd0NvbmRpdGlvbmFsTGluZU1hdGVyaWFsKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhsZHJhd0NvbnRlbnQgPyAnTG9hZGluZyBMRHJhdyBmcm9tIGNvbnRlbnQnIDogYExvYWRpbmcgTERSIGZpbGU6ICR7bW9kZWxQYXRofWApO1xyXG5cclxuICAgIC8vIFRyeSB0byBwcmVsb2FkIG1hdGVyaWFscyBmaXJzdCwgYnV0IGRvbid0IGZhaWwgaWYgaXQgZG9lc24ndCB3b3JrXHJcbiAgICBjb25zdCBtYXRlcmlhbHNQcm9taXNlID0gbG9hZGVyLnByZWxvYWRNYXRlcmlhbHMoJy9sZHJhdy9MRENvbmZpZy5sZHInKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ01hdGVyaWFscyBwcmVsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3QgcHJlbG9hZCBtYXRlcmlhbHMsIHVzaW5nIGRlZmF1bHRzOicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gT3ZlcnJpZGUgY29uc29sZS53YXJuIHRvIGNhdGNoIHN1Ym9iamVjdCBsb2FkaW5nIGVycm9yc1xyXG4gICAgY29uc3Qgb3JpZ2luYWxXYXJuID0gY29uc29sZS53YXJuO1xyXG4gICAgbGV0IGhhc1N1Ym9iamVjdEVycm9yID0gZmFsc2U7XHJcbiAgICBjb25zb2xlLndhcm4gPSAoLi4uYXJncykgPT4ge1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gYXJncy5qb2luKCcgJyk7XHJcbiAgICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdjb3VsZCBub3QgYmUgbG9hZGVkJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnU3Vib2JqZWN0JykpIHtcclxuICAgICAgICBoYXNTdWJvYmplY3RFcnJvciA9IHRydWU7XHJcbiAgICAgICAgLy8gRG9uJ3QgbG9nIHRoZSB3YXJuaW5nIHRvIGNvbnNvbGVcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgb3JpZ2luYWxXYXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBMb2FkIHRoZSBtb2RlbCAod2FpdCBmb3IgbWF0ZXJpYWxzIGlmIHBvc3NpYmxlLCBidXQgZG9uJ3QgYmxvY2spXHJcbiAgICBtYXRlcmlhbHNQcm9taXNlXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBpZiAoY2FuY2VsbGVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIElmIHdlIGhhdmUgZGlyZWN0IGNvbnRlbnQsIHBhcnNlIGl0OyBvdGhlcndpc2UgbG9hZCBmcm9tIGZpbGVcclxuICAgICAgICBsZXQgbW9kZWxQcm9taXNlOiBQcm9taXNlPFRIUkVFLkdyb3VwIHwgbnVsbD47XHJcblxyXG4gICAgICAgIGlmIChsZHJhd0NvbnRlbnQpIHtcclxuICAgICAgICAgIC8vIFVzZSBwYXJzZSB3aXRoIGNhbGxiYWNrcyBhbmQgd3JhcCBpbiBhIHByb21pc2VcclxuICAgICAgICAgIG1vZGVsUHJvbWlzZSA9IG5ldyBQcm9taXNlPFRIUkVFLkdyb3VwIHwgbnVsbD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgbG9hZGVyLnBhcnNlKFxyXG4gICAgICAgICAgICAgIGxkcmF3Q29udGVudCxcclxuICAgICAgICAgICAgICAoZ3JvdXA6IFRIUkVFLkdyb3VwKSA9PiByZXNvbHZlKGdyb3VwKSxcclxuICAgICAgICAgICAgICAoZXJyb3I6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBMRHJhdyBjb250ZW50OicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtb2RlbFBhdGgpIHtcclxuICAgICAgICAgIG1vZGVsUHJvbWlzZSA9IGxvYWRlci5sb2FkQXN5bmMobW9kZWxQYXRoKS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBtb2RlbDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG1vZGVsUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1vZGVsUHJvbWlzZS50aGVuKChncm91cCkgPT4ge1xyXG4gICAgICAgICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBjb25zb2xlLndhcm5cclxuICAgICAgICAgIGNvbnNvbGUud2FybiA9IG9yaWdpbmFsV2FybjtcclxuXHJcbiAgICAgICAgICBpZiAoIWdyb3VwIHx8IGNhbmNlbGxlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIHdlcmUgc3Vib2JqZWN0IGVycm9yc1xyXG4gICAgICAgICAgaWYgKGhhc1N1Ym9iamVjdEVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBoYXMgbWlzc2luZyBwYXJ0cywgZGlzcGxheWluZyBhcyBlcnJvcicpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcGFydHMgLSBtb2RlbCBjYW5ub3QgYmUgcmVuZGVyZWQgcHJvcGVybHknKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTW9kZWwgbG9hZGVkIHN1Y2Nlc3NmdWxseTonLCBncm91cCk7XHJcbiAgICAgICAgICBpc0xvYWRpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgIC8vIFNhZmUgdHJhdmVyc2FsIHRvIGhhbmRsZSBudWxsIG9iamVjdHMgLSByZW1vdmUgdGhlbSBjb21wbGV0ZWx5XHJcbiAgICAgICAgICBjb25zdCBzYWZlVHJhdmVyc2UgPSAob2JqOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgLy8gU2tpcCBpZiBudWxsIG9yIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBpZiAoIW9iaikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gU2tpcCBpZiBub3QgYSB2YWxpZCBvYmplY3RcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvLyBTa2lwIGlmIGRvZXNuJ3QgaGF2ZSB2aXNpYmxlIHByb3BlcnR5IChub3QgYSBUaHJlZS5qcyBvYmplY3QpXHJcbiAgICAgICAgICAgIGlmICghKCd2aXNpYmxlJyBpbiBvYmopKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIHRoaXMgb2JqZWN0XHJcbiAgICAgICAgICAgIGlmICgob2JqIGFzIGFueSkuaXNNZXNoKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IG9iaiBhcyBUSFJFRS5NZXNoO1xyXG4gICAgICAgICAgICAgIGlmICghbWVzaC5tYXRlcmlhbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZGVmYXVsdCBtYXRlcmlhbCBpZiBtaXNzaW5nXHJcbiAgICAgICAgICAgICAgICBtZXNoLm1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtcclxuICAgICAgICAgICAgICAgICAgY29sb3I6IDB4ODA4MDgwLFxyXG4gICAgICAgICAgICAgICAgICBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBZGRlZCBkZWZhdWx0IG1hdGVyaWFsIHRvIG1lc2g6JywgbWVzaC5uYW1lKTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWVzaC5tYXRlcmlhbCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGFycmF5IG9mIG1hdGVyaWFsc1xyXG4gICAgICAgICAgICAgICAgbWVzaC5tYXRlcmlhbCA9IG1lc2gubWF0ZXJpYWwubWFwKChtYXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgaWYgKCFtYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVwbGFjaW5nIG51bGwgbWF0ZXJpYWwgaW4gYXJyYXknKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAweDgwODA4MCxcclxuICAgICAgICAgICAgICAgICAgICAgIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gbWF0O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgbnVsbCBjaGlsZHJlbiBjb21wbGV0ZWx5XHJcbiAgICAgICAgICAgIGlmIChvYmouY2hpbGRyZW4gJiYgQXJyYXkuaXNBcnJheShvYmouY2hpbGRyZW4pKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdmFsaWRDaGlsZHJlbiA9IFtdO1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2Ygb2JqLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGtlZXAgdmFsaWQgY2hpbGRyZW5cclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZCAmJiB0eXBlb2YgY2hpbGQgPT09ICdvYmplY3QnICYmICd2aXNpYmxlJyBpbiBjaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgICB2YWxpZENoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICBzYWZlVHJhdmVyc2UoY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1JlbW92aW5nIGludmFsaWQgY2hpbGQgZnJvbSBtb2RlbDonLCBjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIFJlcGxhY2UgY2hpbGRyZW4gYXJyYXkgd2l0aCBvbmx5IHZhbGlkIG9uZXNcclxuICAgICAgICAgICAgICBvYmouY2hpbGRyZW4gPSB2YWxpZENoaWxkcmVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIHNhZmVUcmF2ZXJzZShncm91cCk7XHJcblxyXG4gICAgICAgIC8vIFNraXAgc3RlcCBwYXJzaW5nIGZvciBub3cgLSBqdXN0IGFkZCB0aGUgbW9kZWwgYXMtaXNcclxuICAgICAgICAvKlxyXG4gICAgICAgIC8vIFBhcnNlIFNURVAgY29tbWFuZHMgZnJvbSB0aGUgTERyYXcgY29udGVudCBpZiBhdmFpbGFibGVcclxuICAgICAgICBsZXQgc3RlcEJvdW5kYXJpZXM6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICBsZXQgcGFydENvdW50ID0gMDtcclxuICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKHRyaW1tZWQuc3RhcnRzV2l0aCgnMSAnKSkge1xyXG4gICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBwYXJ0IGxpbmVcclxuICAgICAgICAgICAgICBwYXJ0Q291bnQrKztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0cmltbWVkID09PSAnMCBTVEVQJyB8fCB0cmltbWVkLnRvTG93ZXJDYXNlKCkgPT09ICcwIHN0ZXAnKSB7XHJcbiAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIFNURVAgY29tbWFuZFxyXG4gICAgICAgICAgICAgIHN0ZXBCb3VuZGFyaWVzLnB1c2gocGFydENvdW50KTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgU1RFUCBjb21tYW5kIGFmdGVyIHBhcnQgJHtwYXJ0Q291bnR9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWYgKHN0ZXBCb3VuZGFyaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYEZvdW5kICR7c3RlcEJvdW5kYXJpZXMubGVuZ3RofSBTVEVQIGNvbW1hbmRzIGluIG1vZGVsYCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBPcmdhbml6ZSBtb2RlbCBpbnRvIHN0ZXBzIGJhc2VkIG9uIFNURVAgY29tbWFuZHNcclxuICAgICAgICBjb25zdCBzdGVwczogVEhSRUUuR3JvdXBbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGFsbFBhcnRzOiBUSFJFRS5PYmplY3QzRFtdID0gW107XHJcblxyXG4gICAgICAgIC8vIENvbGxlY3Qgb25seSBkaXJlY3QgY2hpbGQgZ3JvdXBzL29iamVjdHMgKG5vdCBuZXN0ZWQgbWVzaGVzKVxyXG4gICAgICAgIC8vIEVhY2ggZGlyZWN0IGNoaWxkIHR5cGljYWxseSByZXByZXNlbnRzIG9uZSBwYXJ0IGZyb20gdGhlIExEcmF3IGZpbGVcclxuICAgICAgICBjb25zdCBjb2xsZWN0VG9wTGV2ZWxQYXJ0cyA9IChvYmo6IGFueSwgZGVwdGg6IG51bWJlciA9IDApID0+IHtcclxuICAgICAgICAgIC8vIEZvciB0aGUgcm9vdCBncm91cCwgcHJvY2VzcyBpdHMgZGlyZWN0IGNoaWxkcmVuXHJcbiAgICAgICAgICBpZiAoZGVwdGggPT09IDApIHtcclxuICAgICAgICAgICAgb2JqLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAvLyBFYWNoIGRpcmVjdCBjaGlsZCBpcyB0eXBpY2FsbHkgYSBwYXJ0XHJcbiAgICAgICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09ICdHcm91cCcgfHwgY2hpbGQudHlwZSA9PT0gJ09iamVjdDNEJyB8fCBjaGlsZC5pc01lc2ggfHwgY2hpbGQuaXNMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICBhbGxQYXJ0cy5wdXNoKGNoaWxkKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbGxlY3RUb3BMZXZlbFBhcnRzKGdyb3VwKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHthbGxQYXJ0cy5sZW5ndGh9IHRvcC1sZXZlbCBwYXJ0cyBpbiBtb2RlbGApO1xyXG5cclxuICAgICAgICAvLyBJZiB3ZSBoYXZlIFNURVAgY29tbWFuZHMsIG9yZ2FuaXplIHBhcnRzIGFjY29yZGluZ2x5XHJcbiAgICAgICAgaWYgKHN0ZXBCb3VuZGFyaWVzLmxlbmd0aCA+IDAgJiYgYWxsUGFydHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgY29uc3QgdG90YWxTdGVwcyA9IHN0ZXBCb3VuZGFyaWVzLmxlbmd0aDtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBPcmdhbml6aW5nICR7YWxsUGFydHMubGVuZ3RofSBwYXJ0cyBpbnRvICR7dG90YWxTdGVwc30gc3RlcHNgKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBTdGVwIGJvdW5kYXJpZXMgKGN1bXVsYXRpdmUgcGFydCBjb3VudHMpOiAke3N0ZXBCb3VuZGFyaWVzLmpvaW4oJywgJyl9YCk7XHJcblxyXG4gICAgICAgICAgLy8gQXNzaWduIHN0ZXAgbnVtYmVycyB0byBlYWNoIHBhcnRcclxuICAgICAgICAgIGFsbFBhcnRzLmZvckVhY2goKHBhcnQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEZpbmQgd2hpY2ggc3RlcCB0aGlzIHBhcnQgYmVsb25ncyB0b1xyXG4gICAgICAgICAgICBsZXQgc3RlcE51bWJlciA9IDE7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RlcEJvdW5kYXJpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBpZiAoaW5kZXggPCBzdGVwQm91bmRhcmllc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgc3RlcE51bWJlciA9IGkgKyAxO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBc3NpZ24gc3RlcCBudW1iZXIgdG8gdGhpcyBwYXJ0IGFuZCBhbGwgaXRzIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIHBhcnQudXNlckRhdGEuc3RlcE51bWJlciA9IHN0ZXBOdW1iZXI7XHJcbiAgICAgICAgICAgIHBhcnQudHJhdmVyc2UoKGNoaWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICBjaGlsZC51c2VyRGF0YS5zdGVwTnVtYmVyID0gc3RlcE51bWJlcjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBDcmVhdGUgc3RlcCBncm91cHMgYW5kIGFkZCBwYXJ0cyB0byB0aGVtXHJcbiAgICAgICAgICBmb3IgKGxldCBzdGVwTnVtID0gMTsgc3RlcE51bSA8PSB0b3RhbFN0ZXBzOyBzdGVwTnVtKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RlcEdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XHJcbiAgICAgICAgICAgIHN0ZXBHcm91cC5uYW1lID0gYFN0ZXAgJHtzdGVwTnVtfWA7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0c0luU3RlcCA9IDA7XHJcblxyXG4gICAgICAgICAgICBhbGxQYXJ0cy5mb3JFYWNoKHBhcnQgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChwYXJ0LnVzZXJEYXRhLnN0ZXBOdW1iZXIgPT09IHN0ZXBOdW0pIHtcclxuICAgICAgICAgICAgICAgIHN0ZXBHcm91cC5hZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0c0luU3RlcCsrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFydHNJblN0ZXAgPiAwKSB7XHJcbiAgICAgICAgICAgICAgc3RlcHMucHVzaChzdGVwR3JvdXApO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTdGVwICR7c3RlcE51bX06ICR7cGFydHNJblN0ZXB9IHBhcnRzYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIE5vIFNURVAgY29tbWFuZHMgZm91bmQsIHRyZWF0IGFsbCBwYXJ0cyBhcyBvbmUgc3RlcFxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIFNURVAgY29tbWFuZHMgZm91bmQsIHRyZWF0aW5nIG1vZGVsIGFzIHNpbmdsZSBzdGVwJyk7XHJcbiAgICAgICAgICBjb25zdCBzaW5nbGVTdGVwID0gbmV3IFRIUkVFLkdyb3VwKCk7XHJcbiAgICAgICAgICBzaW5nbGVTdGVwLm5hbWUgPSAnU3RlcCAxJztcclxuICAgICAgICAgIGFsbFBhcnRzLmZvckVhY2gocGFydCA9PiB7XHJcbiAgICAgICAgICAgIHBhcnQudXNlckRhdGEuc3RlcE51bWJlciA9IDE7XHJcbiAgICAgICAgICAgIHBhcnQudHJhdmVyc2UoKGNoaWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICBjaGlsZC51c2VyRGF0YS5zdGVwTnVtYmVyID0gMTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNpbmdsZVN0ZXAuYWRkKHBhcnQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBpZiAoc2luZ2xlU3RlcC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHN0ZXBzLnB1c2goc2luZ2xlU3RlcCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDb2xsZWN0IGFsbCBtZXNoL2xpbmUgb2JqZWN0cyBmb3IgdmlzaWJpbGl0eSBjb250cm9sXHJcbiAgICAgICAgY29uc3QgYWxsUmVuZGVyYWJsZXM6IFRIUkVFLk9iamVjdDNEW10gPSBbXTtcclxuICAgICAgICBncm91cC50cmF2ZXJzZSgoY2hpbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCB8fCBjaGlsZC5pc0xpbmUgfHwgY2hpbGQuaXNMaW5lU2VnbWVudHMpIHtcclxuICAgICAgICAgICAgYWxsUmVuZGVyYWJsZXMucHVzaChjaGlsZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBNb2RlbCBvcmdhbml6ZWQgaW50byAke3N0ZXBzLmxlbmd0aH0gc3RlcHMgd2l0aCAke2FsbFJlbmRlcmFibGVzLmxlbmd0aH0gcmVuZGVyYWJsZSBvYmplY3RzYCk7XHJcbiAgICAgICAgc3RlcHNSZWYuY3VycmVudCA9IHN0ZXBzO1xyXG4gICAgICAgIGFsbFBhcnRzUmVmLmN1cnJlbnQgPSBhbGxSZW5kZXJhYmxlcztcclxuICAgICAgICBzZXRUb3RhbFN0ZXBzKHN0ZXBzLmxlbmd0aCk7XHJcbiAgICAgICAgc2V0Q3VycmVudFN0ZXAoc3RlcHMubGVuZ3RoKTsgLy8gU3RhcnQgd2l0aCBhbGwgc3RlcHMgdmlzaWJsZVxyXG4gICAgICAgICovXHJcblxyXG4gICAgICAgIC8vIFBvc2l0aW9uIG1vZGVsIGF0IG9yaWdpblxyXG4gICAgICAgIGdyb3VwLnBvc2l0aW9uLnNldCgwLCAwLCAwKTtcclxuICAgICAgICBncm91cC5yb3RhdGlvbi54ID0gTWF0aC5QSTsgIC8vIFJvdGF0aW9uIGNhbiBjYXVzZSBpc3N1ZXMsIGtlZXBpbmcgaXQgY29tbWVudGVkXHJcbiAgICAgICAgbW9kZWxHcm91cFJlZi5jdXJyZW50ID0gZ3JvdXA7XHJcblxyXG4gICAgICAgIGlmIChzY2VuZVJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICBzY2VuZVJlZi5jdXJyZW50LmFkZChncm91cCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTW9kZWwgYWRkZWQgdG8gc2NlbmUnKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdHcm91cCBjaGlsZHJlbjonLCBncm91cC5jaGlsZHJlbi5sZW5ndGgpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0dyb3VwIHZpc2libGU6JywgZ3JvdXAudmlzaWJsZSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnR3JvdXAgaW4gc2NlbmU6Jywgc2NlbmVSZWYuY3VycmVudC5jaGlsZHJlbi5pbmNsdWRlcyhncm91cCkpO1xyXG5cclxuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZ3JvdXAgaXMgdmlzaWJsZVxyXG4gICAgICAgICAgZ3JvdXAudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICBncm91cC50cmF2ZXJzZSgoY2hpbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBjaGlsZC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIC8vIENvdW50IHZpc2libGUgbWVzaGVzIGFuZCBjaGVjayBtYXRlcmlhbHNcclxuICAgICAgICAgIGxldCBtZXNoQ291bnQgPSAwO1xyXG4gICAgICAgICAgbGV0IHZpc2libGVDb3VudCA9IDA7XHJcbiAgICAgICAgICBncm91cC50cmF2ZXJzZSgoY2hpbGQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoKGNoaWxkIGFzIGFueSkuaXNNZXNoKSB7XHJcbiAgICAgICAgICAgICAgbWVzaENvdW50Kys7XHJcbiAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IGNoaWxkIGFzIFRIUkVFLk1lc2g7XHJcbiAgICAgICAgICAgICAgaWYgKG1lc2gudmlzaWJsZSkgdmlzaWJsZUNvdW50Kys7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghbWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveCkge1xyXG4gICAgICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vIExvZyBtZXNoIGRldGFpbHNcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTWVzaCBkZXRhaWxzOicsIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG1lc2gubmFtZSxcclxuICAgICAgICAgICAgICAgIHZpc2libGU6IG1lc2gudmlzaWJsZSxcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBtZXNoLm1hdGVyaWFsLFxyXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnlWZXJ0aWNlczogbWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uPy5jb3VudCB8fCAwLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG1lc2gucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogbWVzaC5zY2FsZVxyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgbWVzaCBoYXMgYSBtYXRlcmlhbFxyXG4gICAgICAgICAgICAgIGlmICghbWVzaC5tYXRlcmlhbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNZXNoIGhhcyBubyBtYXRlcmlhbCwgYWRkaW5nIGRlZmF1bHQnKTtcclxuICAgICAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICAgICAgICBjb2xvcjogMHhmZjAwMDAsXHJcbiAgICAgICAgICAgICAgICAgIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHttZXNoQ291bnR9IG1lc2hlcywgJHt2aXNpYmxlQ291bnR9IHZpc2libGVgKTtcclxuXHJcbiAgICAgICAgICAvLyBUZXN0IGN1YmUgcmVtb3ZlZCAtIHJlbmRlcmluZyB2ZXJpZmllZCB0byBiZSB3b3JraW5nXHJcbiAgICAgICAgICAvLyBjb25zdCB0ZXN0R2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoNTAsIDUwLCA1MCk7XHJcbiAgICAgICAgICAvLyBjb25zdCB0ZXN0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoeyBjb2xvcjogMHgwMGZmMDAgfSk7XHJcbiAgICAgICAgICAvLyBjb25zdCB0ZXN0Q3ViZSA9IG5ldyBUSFJFRS5NZXNoKHRlc3RHZW9tZXRyeSwgdGVzdE1hdGVyaWFsKTtcclxuICAgICAgICAgIC8vIHRlc3RDdWJlLnBvc2l0aW9uLnNldCgxMDAsIDI1LCAwKTtcclxuICAgICAgICAgIC8vIHNjZW5lUmVmLmN1cnJlbnQuYWRkKHRlc3RDdWJlKTtcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdUZXN0IGN1YmUgYWRkZWQgYXQ6JywgdGVzdEN1YmUucG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRm9yY2UgdXBkYXRlIG1hdHJpY2VzIGJlZm9yZSBjYWxjdWxhdGluZyBib3VuZGluZyBib3hcclxuICAgICAgICBncm91cC51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGJvdW5kaW5nIGJveCBhbmQgY2VudGVyIGNhbWVyYVxyXG4gICAgICAgIGNvbnN0IGJveCA9IG5ldyBUSFJFRS5Cb3gzKCkuc2V0RnJvbU9iamVjdChncm91cCk7XHJcbiAgICAgICAgY29uc3QgY2VudGVyID0gYm94LmdldENlbnRlcihuZXcgVEhSRUUuVmVjdG9yMygpKTtcclxuICAgICAgICBjb25zdCBzaXplID0gYm94LmdldFNpemUobmV3IFRIUkVFLlZlY3RvcjMoKSk7XHJcblxyXG4gICAgICAgIC8vIExvZyBtb2RlbCBpbmZvcm1hdGlvblxyXG4gICAgICAgIGlmICghYm94LmlzRW1wdHkoKSAmJiBzaXplLnggPiAwICYmIHNpemUueSA+IDAgJiYgc2l6ZS56ID4gMCkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ01vZGVsIGNlbnRlcjonLCBjZW50ZXIueCwgY2VudGVyLnksIGNlbnRlci56KTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBzaXplOicsIHNpemUueCwgc2l6ZS55LCBzaXplLnopO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ01vZGVsIGhhcyBlbXB0eS9pbnZhbGlkIGJvdW5kaW5nIGJveCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbnRyb2xzUmVmLmN1cnJlbnQgJiYgY2FtZXJhUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIC8vIFJlc3RvcmUgY2FtZXJhIHBvc2l0aW9uIGlmIHByZXNlcnZlQ2FtZXJhIGlzIHRydWUgYW5kIHdlIGhhdmUgc2F2ZWQgc3RhdGVcclxuICAgICAgICAgIGlmIChwcmVzZXJ2ZUNhbWVyYSAmJiBzYXZlZENhbWVyYVBvc2l0aW9uLmN1cnJlbnQgJiYgc2F2ZWRDYW1lcmFUYXJnZXQuY3VycmVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzdG9yaW5nIGNhbWVyYSBwb3NpdGlvbicpO1xyXG4gICAgICAgICAgICBjYW1lcmFSZWYuY3VycmVudC5wb3NpdGlvbi5jb3B5KHNhdmVkQ2FtZXJhUG9zaXRpb24uY3VycmVudCk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xzUmVmLmN1cnJlbnQudGFyZ2V0LmNvcHkoc2F2ZWRDYW1lcmFUYXJnZXQuY3VycmVudCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBKdXN0IHVwZGF0ZSBjb250cm9scyB0byBsb29rIGF0IG9yaWdpbiBmb3IgaW5pdGlhbCBsb2FkXHJcbiAgICAgICAgICAgIGNvbnRyb2xzUmVmLmN1cnJlbnQudGFyZ2V0LnNldCgwLCAwLCAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnRyb2xzUmVmLmN1cnJlbnQudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUaGUgYW5pbWF0aW9uIGxvb3Agd2lsbCBoYW5kbGUgcmVuZGVyaW5nXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NjZW5lIGNoaWxkcmVuOicsIHNjZW5lUmVmLmN1cnJlbnQ/LmNoaWxkcmVuLmxlbmd0aCB8fCAwKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgY29uc29sZS53YXJuIGluIGNhc2Ugb2YgZXJyb3JcclxuICAgICAgICBjb25zb2xlLndhcm4gPSBvcmlnaW5hbFdhcm47XHJcblxyXG4gICAgICAgIGlmIChjYW5jZWxsZWQpIHJldHVybjtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIG1vZGVsOicsIGVycm9yKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdNb2RlbCBwYXRoOicsIG1vZGVsUGF0aCk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignU3RhY2sgdHJhY2U6JywgZXJyb3Iuc3RhY2spO1xyXG4gICAgICAgIGlzTG9hZGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIFNldCBlcnJvciBtZXNzYWdlIGZvciBkaXNwbGF5XHJcbiAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICdCdWlsZCBmYWlsZWQgdG8gcmVuZGVyJztcclxuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZSkge1xyXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIG1pc3NpbmcgcGFydHMgZXJyb3JcclxuICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdNaXNzaW5nIHBhcnRzJykpIHtcclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ0Nhbm5vdCBiZSByZW5kZXJlZFxcbk1pc3NpbmcgTEVHTyBwYXJ0cyc7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBzcGVjaWZpYyBwYXJ0IHRoYXQgZmFpbGVkIGlmIGF2YWlsYWJsZVxyXG4gICAgICAgICAgICBjb25zdCBwYXJ0TWF0Y2ggPSBlcnJvci5tZXNzYWdlLm1hdGNoKC9cIihbXlwiXStcXC5kYXQpXCIvKTtcclxuICAgICAgICAgICAgaWYgKHBhcnRNYXRjaCkge1xyXG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGBCdWlsZCBmYWlsZWQgdG8gcmVuZGVyXFxuSW52YWxpZCBwYXJ0OiAke3BhcnRNYXRjaFsxXX1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldExvYWRFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICB9KTtcclxuICAgICAgfSk7ICAvLyBDbG9zZSB0aGUgLmZpbmFsbHkoKSBibG9ja1xyXG5cclxuICAgIC8vIENsZWFudXAgZnVuY3Rpb24gLSBvbmx5IHJlbW92ZSBtb2RlbCBpZiBwYXRoIGNoYW5nZXMgb3IgY29tcG9uZW50IHVubW91bnRzXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBjYW5jZWxsZWQgPSB0cnVlO1xyXG4gICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIGNvbnNvbGUud2FybiBpZiBpdCdzIGJlZW4gb3ZlcnJpZGRlblxyXG4gICAgICBpZiAoY29uc29sZS53YXJuICE9PSBvcmlnaW5hbFdhcm4pIHtcclxuICAgICAgICBjb25zb2xlLndhcm4gPSBvcmlnaW5hbFdhcm47XHJcbiAgICAgIH1cclxuICAgICAgLy8gRG9uJ3QgY2xlYXIgdGhlIG1vZGVsIGhlcmUgLSBpdCB3aWxsIGJlIGNsZWFyZWQgd2hlbiBhIG5ldyBtb2RlbCBsb2Fkc1xyXG4gICAgICAvLyBvciB3aGVuIHRoZSBjb21wb25lbnQgdW5tb3VudHNcclxuICAgIH07XHJcbiAgfSwgW21vZGVsUGF0aCwgbGRyYXdDb250ZW50XSk7XHJcblxyXG4gIC8vIENsZWFuIHVwIG1vZGVsIHdoZW4gY29tcG9uZW50IHVubW91bnRzXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlmIChtb2RlbEdyb3VwUmVmLmN1cnJlbnQgJiYgc2NlbmVSZWYuY3VycmVudCkge1xyXG4gICAgICAgIC8vIE1hcmsgYXMgaW52aXNpYmxlIGZpcnN0XHJcbiAgICAgICAgbW9kZWxHcm91cFJlZi5jdXJyZW50LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAvLyBUaGVuIHJlbW92ZVxyXG4gICAgICAgIHNjZW5lUmVmLmN1cnJlbnQucmVtb3ZlKG1vZGVsR3JvdXBSZWYuY3VycmVudCk7XHJcbiAgICAgICAgbW9kZWxHcm91cFJlZi5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpc0xvYWRpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICBjdXJyZW50TW9kZWxQYXRoUmVmLmN1cnJlbnQgPSAnJztcclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBVcGRhdGUgdmlzaWJpbGl0eSBiYXNlZCBvbiBjdXJyZW50IHN0ZXBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGFsbFBhcnRzUmVmLmN1cnJlbnQubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgY29uc29sZS5sb2coYFVwZGF0aW5nIHZpc2liaWxpdHkgZm9yIHN0ZXAgJHtjdXJyZW50U3RlcH0gb2YgJHt0b3RhbFN0ZXBzfWApO1xyXG5cclxuICAgIC8vIFNob3cvaGlkZSBwYXJ0cyBiYXNlZCBvbiBjdXJyZW50IHN0ZXBcclxuICAgIGFsbFBhcnRzUmVmLmN1cnJlbnQuZm9yRWFjaChwYXJ0ID0+IHtcclxuICAgICAgY29uc3QgcGFydFN0ZXAgPSBwYXJ0LnVzZXJEYXRhLnN0ZXBOdW1iZXIgfHwgMTtcclxuICAgICAgcGFydC52aXNpYmxlID0gcGFydFN0ZXAgPD0gY3VycmVudFN0ZXA7XHJcbiAgICB9KTtcclxuICB9LCBbY3VycmVudFN0ZXAsIHRvdGFsU3RlcHNdKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScsIHdpZHRoOiAnMTAwJScgfX0+XHJcbiAgICAgIDxkaXZcclxuICAgICAgICByZWY9e2NvbnRhaW5lclJlZn1cclxuICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgIGhlaWdodDogJzYwMHB4JyxcclxuICAgICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCAjY2NjJyxcclxuICAgICAgICAgIGJvcmRlclJhZGl1czogJzhweCcsXHJcbiAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXHJcbiAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xyXG4gICAgICAgIH19XHJcbiAgICAgID5cclxuICAgICAgICB7bG9hZEVycm9yICYmIChcclxuICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICB0b3A6ICc1MCUnLFxyXG4gICAgICAgICAgICAgIGxlZnQ6ICc1MCUnLFxyXG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXHJcbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjk1KScsXHJcbiAgICAgICAgICAgICAgcGFkZGluZzogJzIwcHggMzBweCcsXHJcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JyxcclxuICAgICAgICAgICAgICBib3hTaGFkb3c6ICcwIDJweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKScsXHJcbiAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICB6SW5kZXg6IDEwMFxyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2QzMmYyZicsXHJcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxyXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodDogJzYwMCcsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206ICc4cHgnXHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIOKaoO+4jyB7bG9hZEVycm9yLnNwbGl0KCdcXG4nKVswXX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIHtsb2FkRXJyb3IuaW5jbHVkZXMoJ1xcbicpICYmIChcclxuICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICBjb2xvcjogJyM2NjYnLFxyXG4gICAgICAgICAgICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxyXG4gICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICc4cHgnXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHtsb2FkRXJyb3Iuc3BsaXQoJ1xcbicpWzFdfVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIHt0b3RhbFN0ZXBzID4gMSAmJiAoXHJcbiAgICAgICAgPGRpdiBzdHlsZT17e1xyXG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICBib3R0b206ICcyMHB4JyxcclxuICAgICAgICAgIGxlZnQ6ICc1MCUnLFxyXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtNTAlKScsXHJcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOTUpJyxcclxuICAgICAgICAgIHBhZGRpbmc6ICcxNXB4IDIwcHgnLFxyXG4gICAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JyxcclxuICAgICAgICAgIGJveFNoYWRvdzogJzAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjIpJyxcclxuICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG4gICAgICAgICAgZ2FwOiAnMTVweCcsXHJcbiAgICAgICAgICBtaW5XaWR0aDogJzQwMHB4JyxcclxuICAgICAgICAgIHpJbmRleDogMTAwMFxyXG4gICAgICAgIH19PlxyXG4gICAgICAgICAgPGxhYmVsIHN0eWxlPXt7XHJcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcclxuICAgICAgICAgICAgZm9udFNpemU6ICcxNHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjMzMzJyxcclxuICAgICAgICAgICAgbWluV2lkdGg6ICc4MHB4J1xyXG4gICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgIFN0ZXAge2N1cnJlbnRTdGVwfS97dG90YWxTdGVwc31cclxuICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgdHlwZT1cInJhbmdlXCJcclxuICAgICAgICAgICAgbWluPXsxfVxyXG4gICAgICAgICAgICBtYXg9e3RvdGFsU3RlcHN9XHJcbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50U3RlcH1cclxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDdXJyZW50U3RlcChwYXJzZUludChlLnRhcmdldC52YWx1ZSkpfVxyXG4gICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgIGZsZXg6IDEsXHJcbiAgICAgICAgICAgICAgaGVpZ2h0OiAnNnB4JyxcclxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBgbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjNENBRjUwIDAlLCAjNENBRjUwICR7KChjdXJyZW50U3RlcCAtIDEpIC8gKHRvdGFsU3RlcHMgLSAxKSkgKiAxMDB9JSwgI2RkZCAkeygoY3VycmVudFN0ZXAgLSAxKSAvICh0b3RhbFN0ZXBzIC0gMSkpICogMTAwfSUsICNkZGQgMTAwJSlgLFxyXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzNweCcsXHJcbiAgICAgICAgICAgICAgb3V0bGluZTogJ25vbmUnLFxyXG4gICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT17e1xyXG4gICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICAgICAgICAgIGdhcDogJzhweCdcclxuICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0Q3VycmVudFN0ZXAoTWF0aC5tYXgoMSwgY3VycmVudFN0ZXAgLSAxKSl9XHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2N1cnJlbnRTdGVwIDw9IDF9XHJcbiAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6ICc2cHggMTJweCcsXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGN1cnJlbnRTdGVwID4gMSA/ICcjNENBRjUwJyA6ICcjY2NjJyxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBjdXJyZW50U3RlcCA+IDEgPyAncG9pbnRlcicgOiAnbm90LWFsbG93ZWQnLFxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcxMnB4JyxcclxuICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJ1xyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICDihpAgUHJldlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEN1cnJlbnRTdGVwKE1hdGgubWluKHRvdGFsU3RlcHMsIGN1cnJlbnRTdGVwICsgMSkpfVxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtjdXJyZW50U3RlcCA+PSB0b3RhbFN0ZXBzfVxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAnNnB4IDEycHgnLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjdXJyZW50U3RlcCA8IHRvdGFsU3RlcHMgPyAnIzRDQUY1MCcgOiAnI2NjYycsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3doaXRlJyxcclxuICAgICAgICAgICAgICAgIGJvcmRlcjogJ25vbmUnLFxyXG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogY3VycmVudFN0ZXAgPCB0b3RhbFN0ZXBzID8gJ3BvaW50ZXInIDogJ25vdC1hbGxvd2VkJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTJweCcsXHJcbiAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiAnYm9sZCdcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgTmV4dCDihpJcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRDdXJyZW50U3RlcChjdXJyZW50U3RlcCA9PT0gdG90YWxTdGVwcyA/IDEgOiB0b3RhbFN0ZXBzKX1cclxuICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogJzZweCAxMnB4JyxcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMyMTk2RjMnLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6ICd3aGl0ZScsXHJcbiAgICAgICAgICAgICAgICBib3JkZXI6ICdub25lJyxcclxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXHJcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTJweCcsXHJcbiAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiAnYm9sZCdcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAge2N1cnJlbnRTdGVwID09PSB0b3RhbFN0ZXBzID8gJ1Jlc2V0JyA6ICdBbGwnfVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbmNvbnN0IExEUlZpZXdlciA9IG1lbW8oTERSVmlld2VyQ29tcG9uZW50KTtcclxuZXhwb3J0IGRlZmF1bHQgTERSVmlld2VyO1xyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJtZW1vIiwiVEhSRUUiLCJPcmJpdENvbnRyb2xzIiwiTERyYXdMb2FkZXIiLCJMRHJhd0NvbmRpdGlvbmFsTGluZU1hdGVyaWFsIiwiTERSVmlld2VyQ29tcG9uZW50IiwibW9kZWxQYXRoIiwibGRyYXdDb250ZW50IiwicHJlc2VydmVDYW1lcmEiLCJjb250YWluZXJSZWYiLCJzY2VuZVJlZiIsInJlbmRlcmVyUmVmIiwiY2FtZXJhUmVmIiwiY29udHJvbHNSZWYiLCJtb2RlbEdyb3VwUmVmIiwibG9hZGluZ01hbmFnZXJSZWYiLCJpc0xvYWRpbmdSZWYiLCJjdXJyZW50TW9kZWxQYXRoUmVmIiwiaXNJbml0aWFsaXplZFJlZiIsImVycm9yQ291bnRSZWYiLCJsb2FkRXJyb3IiLCJzZXRMb2FkRXJyb3IiLCJ1c2VTdGF0ZSIsInNhdmVkQ2FtZXJhUG9zaXRpb24iLCJzYXZlZENhbWVyYVRhcmdldCIsImN1cnJlbnRTdGVwIiwic2V0Q3VycmVudFN0ZXAiLCJ0b3RhbFN0ZXBzIiwic2V0VG90YWxTdGVwcyIsInN0ZXBzUmVmIiwiYWxsUGFydHNSZWYiLCJjdXJyZW50IiwibWFuYWdlciIsIkxvYWRpbmdNYW5hZ2VyIiwic2V0VVJMTW9kaWZpZXIiLCJ1cmwiLCJub3JtYWxpemVkIiwicmVwbGFjZSIsImluY2x1ZGVzIiwibWF0Y2giLCJwYXJ0cyIsInNwbGl0IiwibGFzdFR3byIsInNsaWNlIiwidXJsUGFydHMiLCJmaWxlbmFtZSIsImxlbmd0aCIsInRvTG93ZXJDYXNlIiwiaGFzU3ViZGlyIiwicGF0aFByZWZpeGVzIiwicHJlZml4Iiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwidW5kZWZpbmVkIiwiY29udGFpbmVyIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsImNsaWVudEhlaWdodCIsInNjZW5lIiwiU2NlbmUiLCJiYWNrZ3JvdW5kIiwiQ29sb3IiLCJjYW1lcmEiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsInBvc2l0aW9uIiwic2V0IiwicmVuZGVyZXIiLCJXZWJHTFJlbmRlcmVyIiwiYW50aWFsaWFzIiwic2V0U2l6ZSIsInNldFBpeGVsUmF0aW8iLCJ3aW5kb3ciLCJkZXZpY2VQaXhlbFJhdGlvIiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwiY29udHJvbHMiLCJlbmFibGVEYW1waW5nIiwiZGFtcGluZ0ZhY3RvciIsImVuYWJsZVBhbiIsImVuYWJsZVJvdGF0ZSIsImVuYWJsZVpvb20iLCJzY3JlZW5TcGFjZVBhbm5pbmciLCJtaW5EaXN0YW5jZSIsIm1heERpc3RhbmNlIiwidGFyZ2V0IiwiYWRkIiwiQW1iaWVudExpZ2h0IiwiZGlyTGlnaHQiLCJEaXJlY3Rpb25hbExpZ2h0IiwiY2FzdFNoYWRvdyIsImZpbGxMaWdodDEiLCJmaWxsTGlnaHQyIiwiaGVtaUxpZ2h0IiwiSGVtaXNwaGVyZUxpZ2h0IiwiYXhlc0hlbHBlciIsIkF4ZXNIZWxwZXIiLCJoYW5kbGVSZXNpemUiLCJ3IiwiaCIsImFzcGVjdCIsInVwZGF0ZVByb2plY3Rpb25NYXRyaXgiLCJhZGRFdmVudExpc3RlbmVyIiwiY29uc29sZSIsImxvZyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhbmltYXRpb25JZFJlZiIsImlzQW5pbWF0aW5nUmVmIiwiYW5pbWF0ZSIsIndhcm4iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJoYXNOdWxsQ2hpbGRyZW4iLCJudWxsQ2hlY2tDb3VudCIsInRyYXZlcnNlIiwiY2hpbGQiLCJoYXNPd25Qcm9wZXJ0eSIsImVycm9yIiwiY2hpbGRyZW4iLCJpIiwic3BsaWNlIiwiaXNGaW5pdGUiLCJ4IiwieSIsInoiLCJ1cGRhdGUiLCJjbGVhbnVwTnVsbE9iamVjdHMiLCJvYmoiLCJ2YWxpZENoaWxkcmVuIiwidmlzaWJsZSIsInB1c2giLCJyZW5kZXIiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImN1cnJlbnRJZGVudGlmaWVyIiwic3Vic3RyaW5nIiwiY2xvbmUiLCJtb2RlbFRvUmVtb3ZlIiwic2V0VGltZW91dCIsInJlbW92ZSIsImdlb21ldHJ5IiwiZGlzcG9zZSIsIm1hdGVyaWFsIiwiQXJyYXkiLCJpc0FycmF5IiwiZm9yRWFjaCIsIm1hdCIsImNhbmNlbGxlZCIsImxvYWRlciIsInNldFBhcnRzTGlicmFyeVBhdGgiLCJzbW9vdGhOb3JtYWxzIiwic2V0RmlsZU1hcCIsInNldENvbmRpdGlvbmFsTGluZU1hdGVyaWFsIiwibWF0ZXJpYWxzUHJvbWlzZSIsInByZWxvYWRNYXRlcmlhbHMiLCJ0aGVuIiwiY2F0Y2giLCJlcnIiLCJtZXNzYWdlIiwib3JpZ2luYWxXYXJuIiwiaGFzU3Vib2JqZWN0RXJyb3IiLCJhcmdzIiwiam9pbiIsImFwcGx5IiwiZmluYWxseSIsIm1vZGVsUHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicGFyc2UiLCJncm91cCIsImxvYWRBc3luYyIsIkVycm9yIiwic2FmZVRyYXZlcnNlIiwiaXNNZXNoIiwibWVzaCIsIk1lc2hQaG9uZ01hdGVyaWFsIiwiY29sb3IiLCJzaWRlIiwiRG91YmxlU2lkZSIsIm5hbWUiLCJtYXAiLCJyb3RhdGlvbiIsIk1hdGgiLCJQSSIsIm1lc2hDb3VudCIsInZpc2libGVDb3VudCIsImJvdW5kaW5nQm94IiwiY29tcHV0ZUJvdW5kaW5nQm94IiwiZ2VvbWV0cnlWZXJ0aWNlcyIsImF0dHJpYnV0ZXMiLCJjb3VudCIsInNjYWxlIiwidXBkYXRlTWF0cml4V29ybGQiLCJib3giLCJCb3gzIiwic2V0RnJvbU9iamVjdCIsImNlbnRlciIsImdldENlbnRlciIsIlZlY3RvcjMiLCJzaXplIiwiZ2V0U2l6ZSIsImlzRW1wdHkiLCJjb3B5Iiwic3RhY2siLCJlcnJvck1lc3NhZ2UiLCJwYXJ0TWF0Y2giLCJwYXJ0IiwicGFydFN0ZXAiLCJ1c2VyRGF0YSIsInN0ZXBOdW1iZXIiLCJkaXYiLCJzdHlsZSIsInJlZiIsImJvcmRlciIsImJvcmRlclJhZGl1cyIsIm92ZXJmbG93IiwidG9wIiwibGVmdCIsInRyYW5zZm9ybSIsImJhY2tncm91bmRDb2xvciIsInBhZGRpbmciLCJib3hTaGFkb3ciLCJ0ZXh0QWxpZ24iLCJ6SW5kZXgiLCJmb250U2l6ZSIsImZvbnRXZWlnaHQiLCJtYXJnaW5Cb3R0b20iLCJtYXJnaW5Ub3AiLCJib3R0b20iLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImdhcCIsIm1pbldpZHRoIiwibGFiZWwiLCJpbnB1dCIsInR5cGUiLCJtaW4iLCJtYXgiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZSIsInBhcnNlSW50IiwiZmxleCIsIm91dGxpbmUiLCJjdXJzb3IiLCJidXR0b24iLCJvbkNsaWNrIiwiZGlzYWJsZWQiLCJMRFJWaWV3ZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/LDRViewer.tsx\n");

/***/ })

};
;